(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-158cd3a5"],{"0cbc":function(t,e,i){"use strict";i("1dbe")},"1dbe":function(t,e,i){},"3ca3":function(t,e,i){"use strict";var n=i("6547").charAt,o=i("69f3"),s=i("7dd0"),r="String Iterator",a=o.set,c=o.getterFor(r);s(String,"String",(function(t){a(this,{type:r,string:String(t),index:0})}),(function(){var t,e=c(this),i=e.string,o=e.index;return o>=i.length?{value:void 0,done:!0}:(t=n(i,o),e.index+=t.length,{value:t,done:!1})}))},"53ca":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0");function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}},a434:function(t,e,i){"use strict";var n=i("23e7"),o=i("23cb"),s=i("a691"),r=i("50c4"),a=i("7b0b"),c=i("65f0"),l=i("8418"),u=i("1dde"),d=i("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var i,n,u,d,f,p,v=a(this),y=r(v.length),w=o(t,y),S=arguments.length;if(0===S?i=n=0:1===S?(i=0,n=y-w):(i=S-2,n=h(m(s(e),0),y-w)),y+i-n>g)throw TypeError(b);for(u=c(v,n),d=0;d<n;d++)f=w+d,f in v&&l(u,d,v[f]);if(u.length=n,i<n){for(d=w;d<y-n;d++)f=d+n,p=d+i,f in v?v[p]=v[f]:delete v[p];for(d=y;d>y-n+i;d--)delete v[d-1]}else if(i>n)for(d=y-n;d>w;d--)f=d+n-1,p=d+i-1,f in v?v[p]=v[f]:delete v[p];for(d=0;d<i;d++)v[d+w]=arguments[d+2];return v.length=y-n+i,u}})},a649:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-card",{attrs:{shadow:"never"}},[i("el-row",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{gutter:10}},[i("div",{staticStyle:{width:"300px",float:"left"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("div",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleAdd}},[t._v("添加")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSave}},[t._v("保存")])],1)]),i("el-row",{staticStyle:{margin:"20px"}},[i("el-col",{attrs:{span:12}},[i("span",{staticStyle:{"margin-right":"20px"}},[t._v("限速模块配置:")]),i("el-radio-group",{on:{change:t.setbaseState},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[i("el-radio",{attrs:{label:"on"}}),i("el-radio",{attrs:{label:"off"}})],1)],1),i("el-col",{attrs:{span:12}},[i("div",{staticStyle:{float:"right"}},[i("span",{staticStyle:{"margin-right":"20px"}},[t._v("当前数量："+t._s(t.pageTotal))]),i("span",{staticStyle:{color:"blue"}},[t._v("版本号：")]),t._v(t._s(t.version)+" ")])])],1),i("el-table",{attrs:{data:t.userList,border:""}},[i("el-table-column",{attrs:{label:"ID",align:"center",prop:"id",width:"80","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"内容",align:"left",prop:"contents","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"360","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(i){return t.handleSet(e.row)}}},[t._v("编辑")]),i("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-top"},on:{click:function(i){return t.up(e.$index)}}},[t._v("上移")]),i("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-bottom"},on:{click:function(i){return t.down(e.$index)}}},[t._v("下移")]),i("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-arrow-up"},on:{click:function(i){return t.upIndex(e.$index)}}},[t._v("置顶")]),i("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-arrow-down"},on:{click:function(i){return t.downIndex(e.$index)}}},[t._v("置底")]),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.row.visible,callback:function(i){t.$set(e.row,"visible",i)},expression:"scope.row.visible"}},[i("p",[t._v("确定要删除吗?")]),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.handleDel(e.row)}}},[t._v("确定")])],1),i("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),i("el-row",[i("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleApply}},[t._v("应用")])],1)]),i("el-dialog",{attrs:{title:t.title,visible:t.open,width:"60%"},on:{"update:visible":function(e){t.open=e}}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("vue-json-editor",{staticClass:"editorR",attrs:{mode:"code",lang:"zh"},model:{value:t.form.contents,callback:function(e){t.$set(t.form,"contents",e)},expression:"form.contents"}})],1),i("el-col",{attrs:{span:12}},[i("codemirror",{staticClass:"editorR",attrs:{options:t.options},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),i("br"),i("el-link",{attrs:{href:"https://www.kancloud.cn/openstar/install/1136671",target:"_blank"}},[t._v("详情请点击此处，参考文档")])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),i("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)],1)},o=[],s=(i("4de4"),i("c975"),i("d81d"),i("a434"),i("53ca")),r=i("8f94"),a=(i("a7be"),i("acdf"),i("7ba3"),i("a8d9"),i("db91"),i("b2b9"),i("f9d4"),i("8e77")),c=i("45a3"),l=i("a417"),u=i("e762").Base64,d={components:{MarkdownPreview:a["a"],vueJsonEditor:c["a"],codemirror:r["codemirror"]},data:function(){return{code:'{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "hostname":["匹配内容","匹配符","是否取反"],\n    "limit_rate":"限速大小 [2k,2m...]",\n    "tag":["all_Mod"]\n    /* tag 也可以没有 */\n}',options:{tabSize:4,mode:{name:"javascript",json:!0},theme:"darcula",lineNumbers:!0,line:!0,lineWrapping:!0,styleSelectedText:!0,styleActiveLine:!0,hintOptions:{completeSingle:!0}},userList:[],tempList:[],pageTotal:0,state:"",version:"",search:"",open:!1,title:"",form:{id:0,contents:{}}}},created:function(){this.getList()},methods:{isJSON:function(t){if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!=Object(s["a"])(e)||!e)}catch(i){return!1}else if("object"==Object(s["a"])(t)&&t)return!0},setbaseState:function(){var t=this,e={G_version:this.version,state:this.state},i={action:"set",mod:"base",id:"limit_rate_Mod",value:JSON.stringify(e)};Object(l["b"])(i).then((function(e){"ok"===e.code?t.$notify({title:"成功",message:e.msg,type:"success"}):t.$notify({title:"警告",message:e.msg,type:"warning"})}))},up:function(t){0!==t&&this.swapItems(this.userList,t,t-1)},upIndex:function(t){0!==t&&this.swapItems(this.userList,t,0,"up")},down:function(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,t+1)},downIndex:function(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,0,"down")},swapItems:function(t,e,i,n){return"up"==n?(t.unshift(t[e]),t.splice(e+1,1),t):"down"==n?(t.push(t[e]),t.splice(e,1),t):(t[e]=t.splice(i,1,t[e])[0],t)},getList:function(){var t=this,e={action:"get",mod:"limit_rate_Mod"};Object(l["b"])(e).then((function(e){var i=e.msg,n=[];i=e.msg;for(var o in i)if("count"!=o&&"G_version"!=o&&"state"!=o){var s={};s.id=o,s.contents=JSON.stringify(i[o]),n.push(s)}t.version=e.msg.G_version,t.state=e.msg.state,t.userList=n,t.tempList=n,t.pageTotal=n.length}))},reset:function(){this.form={id:0,contents:{}}},cancel:function(){this.open=!1,this.reset()},handleAdd:function(){this.reset(),this.title="添加",this.open=!0},handleSet:function(t){this.reset(),this.title="编辑";var e={};e.id=t.id,e.contents=JSON.parse(t.contents),this.form=e,this.open=!0},handleDel:function(t){var e=this,i={action:"del",mod:"limit_rate_Mod",id:t.id};Object(l["b"])(i).then((function(t){"ok"===t.code?(e.$notify({title:"成功",message:t.msg,type:"success"}),e.open=!1,e.getList()):e.$notify({title:"警告",message:t.msg,type:"warning"})}))},submitForm:function(){var t=this;if(!this.isJSON(this.form.contents))return this.$message.error("配置内容:json格式错误/没有内容"),!1;if("编辑"===this.title){var e={action:"set",mod:"limit_rate_Mod",id:this.form.id,value:JSON.stringify(this.form.contents)};Object(l["b"])(e).then((function(e){"ok"===e.code?(t.$notify({title:"成功",message:e.msg,type:"success"}),t.open=!1,t.getList(1)):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}else{e={action:"add",mod:"limit_rate_Mod",value:JSON.stringify(this.form.contents)};Object(l["b"])(e).then((function(e){"ok"===e.code?(t.$notify({title:"成功",message:e.msg,type:"success"}),t.open=!1,t.getList(1)):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}},handleApply:function(){var t=this,e=this.userList.map((function(t){return JSON.parse(t.contents)})),i={action:"set",mod:"limit_rate_Mod",value:JSON.stringify(e)};Object(l["b"])(i).then((function(e){"ok"==e.code?t.$notify({title:"成功",message:e.msg,type:"success"}):t.$notify({title:"警告",message:e.msg,type:"warning"})}))},handleSave:function(){var t=this,e={action:"save",mod:"all_Mod"};Object(l["h"])(e).then((function(e){"ok"==e.code?t.$notify({title:"成功",message:e.msg,type:"success"}):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}},filters:{match:function(t){return u.decode(t)}},watch:{$route:function(t,e){},search:{handler:function(t,e){this.userList=""===t?this.tempList:this.tempList.filter((function(e){if(e.contents.indexOf(t)>=0)return!0}))}}}},f=d,p=(i("0cbc"),i("2877")),m=Object(p["a"])(f,n,o,!1,null,"2adbc027",null);e["default"]=m.exports},d28b:function(t,e,i){var n=i("746f");n("iterator")},e01a:function(t,e,i){"use strict";var n=i("23e7"),o=i("83ab"),s=i("da84"),r=i("5135"),a=i("861d"),c=i("9bf2").f,l=i("e893"),u=s.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(f,u);var p=f.prototype=u.prototype;p.constructor=f;var m=p.toString,h="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=m.call(t);if(r(d,t))return"";var i=h?e.slice(7,-1):e.replace(g,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:f})}}}]);