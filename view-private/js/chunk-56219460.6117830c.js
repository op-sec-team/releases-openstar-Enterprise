(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56219460"],{5919:function(e,t,i){"use strict";i.d(t,"h",(function(){return o})),i.d(t,"c",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"g",(function(){return m})),i.d(t,"i",(function(){return f})),i.d(t,"a",(function(){return d})),i.d(t,"d",(function(){return u})),i.d(t,"j",(function(){return p})),i.d(t,"b",(function(){return h})),i.d(t,"e",(function(){return _}));var s=i("b775"),a=i("4328"),r=i.n(a),n=i("365c");function o(e){return Object(s["a"])({url:""+n["a"].domain.getDomain,method:"post",data:r.a.stringify(e)})}function l(e){return Object(s["a"])({url:""+n["a"].domain.defenseDomain,method:"post",data:r.a.stringify(e)})}function c(e){return Object(s["a"])({url:""+n["a"].domain.getCertification,method:"post",data:r.a.stringify(e)})}function m(){return Object(s["a"])({url:""+n["a"].domain.getCertification,method:"post"})}function f(e){return Object(s["a"])({url:""+n["a"].domain.setCertification,method:"post",data:r.a.stringify(e)})}function d(e){return Object(s["a"])({url:""+n["a"].domain.addCertification,method:"post",data:r.a.stringify(e)})}function u(e){return Object(s["a"])({url:""+n["a"].domain.delCertification,method:"post",data:r.a.stringify(e)})}function p(e){return Object(s["a"])({url:""+n["a"].domain.setDomain,method:"post",data:r.a.stringify(e)})}function h(e){return Object(s["a"])({url:""+n["a"].domain.addDomain,method:"post",data:r.a.stringify(e)})}function _(e){return Object(s["a"])({url:""+n["a"].domain.delDomain,method:"post",data:r.a.stringify(e)})}},dd27:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{attrs:{shadow:"never"}},[t("el-row",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{gutter:10}},[t("div",{staticStyle:{width:"300px",float:"left"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("div",{staticClass:"el-icon-info",staticStyle:{"margin-left":"100px",float:"left"}},[t("span",{staticStyle:{color:"red"}},[e._v("注：")]),e._v("证书有变更时、且被使用，需要重启整个集群，使其生效")]),t("div",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v("保存")])],1)]),t("el-row",{staticStyle:{margin:"20px"}},[e._v(" 当前数量："+e._s(e.pageTotal)+" ")]),t("el-table",{attrs:{data:e.userList,border:""}},[t("el-table-column",{attrs:{label:"证书名称",align:"left",prop:"certname"}}),t("el-table-column",{attrs:{label:"描述",align:"left",prop:"des","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{label:"过期时间",align:"left",prop:"e_time","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{label:"操作",align:"left",width:"260","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-reading"},on:{click:function(t){return e.handleCheck(i.row)}}},[e._v("查看")]),t("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleSet(i.row)}}},[e._v("修改")]),t("el-popover",{attrs:{placement:"top",width:"160"},model:{value:i.row.visible,callback:function(t){e.$set(i.row,"visible",t)},expression:"scope.row.visible"}},[t("p",[e._v("确定要删除吗?")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){i.row.visible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleDel(i.row)}}},[e._v("确定")])],1),t("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-drawer",{attrs:{title:e.title,visible:e.open,size:"60%"},on:{"update:visible":function(t){e.open=t}}},[t("div",{staticStyle:{padding:"20px"}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"90px"}},[t("el-form-item",{attrs:{label:"证书名称:",prop:"certname"}},[t("el-col",{staticStyle:{float:"left"}},[t("el-input",{directives:[{name:"show",rawName:"v-show",value:"添加"!==e.title,expression:"title !== '添加'"}],staticStyle:{width:"50%"},attrs:{disabled:""},model:{value:e.form.certname,callback:function(t){e.$set(e.form,"certname",t)},expression:"form.certname"}}),t("el-input",{directives:[{name:"show",rawName:"v-show",value:"添加"===e.title,expression:"title === '添加'"}],staticStyle:{width:"50%"},model:{value:e.form.certname,callback:function(t){e.$set(e.form,"certname",t)},expression:"form.certname"}}),t("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("certs_key ")],1)],1),t("el-form-item",{attrs:{label:"证书:",prop:"ssl_certificate"}},[t("el-input",{directives:[{name:"show",rawName:"v-show",value:"查看"===e.title,expression:"title === '查看'"}],attrs:{type:"textarea",rows:"10",disabled:""},model:{value:e.form.ssl_certificate,callback:function(t){e.$set(e.form,"ssl_certificate",t)},expression:"form.ssl_certificate"}}),t("el-input",{directives:[{name:"show",rawName:"v-show",value:"查看"!==e.title,expression:"title !== '查看'"}],attrs:{type:"textarea",rows:"10"},model:{value:e.form.ssl_certificate,callback:function(t){e.$set(e.form,"ssl_certificate",t)},expression:"form.ssl_certificate"}})],1),t("el-form-item",{attrs:{label:"私钥:",prop:"ssl_certificate_key"}},[t("el-input",{directives:[{name:"show",rawName:"v-show",value:"查看"===e.title,expression:"title === '查看'"}],attrs:{type:"textarea",rows:"10",disabled:""},model:{value:e.form.ssl_certificate_key,callback:function(t){e.$set(e.form,"ssl_certificate_key",t)},expression:"form.ssl_certificate_key"}}),t("el-input",{directives:[{name:"show",rawName:"v-show",value:"查看"!==e.title,expression:"title !== '查看'"}],attrs:{type:"textarea",rows:"10"},model:{value:e.form.ssl_certificate_key,callback:function(t){e.$set(e.form,"ssl_certificate_key",t)},expression:"form.ssl_certificate_key"}})],1),t("el-form-item",{attrs:{label:"描述:",prop:"desc"}},[t("el-input",{directives:[{name:"show",rawName:"v-show",value:"查看"===e.title,expression:"title === '查看'"}],attrs:{type:"textarea",rows:"4",disabled:""},model:{value:e.form.des,callback:function(t){e.$set(e.form,"des",t)},expression:"form.des"}}),t("el-input",{directives:[{name:"show",rawName:"v-show",value:"查看"!==e.title,expression:"title !== '查看'"}],attrs:{type:"textarea",rows:"4"},model:{value:e.form.des,callback:function(t){e.$set(e.form,"des",t)},expression:"form.des"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)])],1)],1)},a=[],r=(i("14d9"),i("a417")),n=i("5919");const o=i("e762").Base64;var l={data(){return{userList:[],tempList:[],pageTotal:0,search:"",open:!1,title:"",form:{certname:"",domain:"",des:"",e_time:"",ssl_certificate:"",ssl_certificate_key:""},rules:{certname:[{required:!0,message:"不能为空",trigger:"blur"}],domain:[{required:!0,message:"不能为空",trigger:"blur"}],ssl_certificate:[{required:!0,message:"不能为空",trigger:"blur"}],ssl_certificate_key:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created(){this.getList(1)},methods:{getList(e){var t={certs_key:"all_certs_key"};Object(n["f"])(t).then(e=>{var t=e.msg,i=[];for(var s in t){var a=t[s],r={};r.certname=s,r.domain=a.domain,r.des=a.des,r.e_time=a.e_time,r.ssl_certificate=a.ssl_certificate,r.ssl_certificate_key=a.ssl_certificate_key,i.push(r)}this.userList=i,this.tempList=i,this.pageTotal=i.length})},reset(){this.form={certname:"",domain:"",des:"",e_time:"",ssl_certificate:"",ssl_certificate_key:""}},cancel(){this.open=!1,this.reset()},handleAdd(){this.reset(),this.title="添加",this.open=!0},handleCheck(e){this.reset(),this.title="查看";var t={};t.certname=e.certname,t.domain=e.domain,t.des=e.des,t.e_time=e.e_time,t.ssl_certificate=o.decode(e.ssl_certificate),t.ssl_certificate_key=o.decode(e.ssl_certificate_key),this.form=t,this.open=!0},handleSet(e){this.reset(),this.title="修改";var t={};t.certname=e.certname,t.domain=e.domain,t.des=e.des,t.e_time=e.e_time,t.ssl_certificate=o.decode(e.ssl_certificate),t.ssl_certificate_key=o.decode(e.ssl_certificate_key),this.form=t,this.open=!0},handleDel(e){var t={certs_key:e.certname,unsafe:!0};Object(n["d"])(t).then(e=>{"ok"===e.code?(this.$notify({title:"成功",message:e.msg,type:"success"}),this.open=!1,this.getList(1)):this.$notify({title:"警告",message:e.msg,type:"warning"})})},submitForm(){this.$refs["form"].validate(e=>{if(e)if("修改"===this.title){var t={des:this.form.des,ssl_certificate:o.encode(this.form.ssl_certificate),ssl_certificate_key:o.encode(this.form.ssl_certificate_key)},i={certs_key:this.form.certname,value:JSON.stringify(t),unsafe:!0};Object(n["i"])(i).then(e=>{"ok"===e.code?(this.$notify({title:"成功",message:e.msg,type:"success"}),this.open=!1,this.getList(1)):this.$notify({title:"警告",message:e.msg,type:"warning"})})}else{t={des:this.form.des,ssl_certificate:o.encode(this.form.ssl_certificate),ssl_certificate_key:o.encode(this.form.ssl_certificate_key)},i={certs_key:this.form.certname,value:JSON.stringify(t),unsafe:!0};Object(n["a"])(i).then(e=>{"ok"===e.code?(this.$notify({title:"成功",message:e.msg,type:"success"}),this.open=!1,this.getList(1)):this.$notify({title:"警告",message:e.msg,type:"warning"})})}})},handleSave(){var e={action:"save",mod:"all_Mod"};Object(r["h"])(e).then(e=>{"ok"==e.code?this.$notify({title:"成功",message:e.msg,type:"success"}):this.$notify({title:"警告",message:e.msg,type:"warning"})})}},filters:{match:function(e){return o.decode(e)}},watch:{$route(e,t){},search:{handler:function(e,t){this.userList=""===e?this.tempList:this.tempList.filter((function(t){if(t.certname.indexOf(e)>=0)return!0}))}}}},c=l,m=i("2877"),f=Object(m["a"])(c,s,a,!1,null,null,null);t["default"]=f.exports}}]);