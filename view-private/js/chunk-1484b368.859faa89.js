(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1484b368"],{"083a":function(t,e,a){"use strict";var s=a("0d51"),r=TypeError;t.exports=function(t,e){if(!delete t[e])throw r("Cannot delete property "+s(e)+" of "+s(t))}},"090c":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-table",t._b({attrs:{border:"","header-row-style":{"line-height":"23px"}}},"el-table",t.$attrs,!1),[e("el-table-column",{attrs:{label:"匹配位置",align:"center",prop:"dataTmpselectwz"}}),e("el-table-column",{attrs:{label:"匹配方式",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",disabled:t.flag,placeholder:"请选择"},on:{change:function(e){return t.selectNodematch(a.dataTmpselectmatch,s)}},model:{value:a.dataTmpselectmatch,callback:function(e){t.$set(a,"dataTmpselectmatch","string"===typeof e?e.trim():e)},expression:"row.dataTmpselectmatch"}},t._l(t.computedOptions[a.dataTmpselectwz],(function(a,s){return e("el-option",{key:s,attrs:{value:a,label:a}},[t._v(" "+t._s(a)+" ")])})),1)]}}])}),e("el-table-column",{attrs:{label:"取反标识",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",disabled:t.flag,placeholder:"请选择"},on:{change:function(e){return t.selectNodematchqf(a.dataIsNot,s)}},model:{value:a.dataIsNot,callback:function(e){t.$set(a,"dataIsNot",e)},expression:"row.dataIsNot"}},t._l([!1,!0],(function(t,a){return e("el-option",{key:a,attrs:{value:t,label:t+""}})})),1)]}}])}),e("el-table-column",{attrs:{label:"匹配内容",align:"center",width:"400"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-input",{attrs:{size:"small",placeholder:t.computed_dataRuleValue_place(a.dataTmpselectmatch),name:"name",title:t.computed_dataRuleValue_place(a.dataTmpselectmatch),disabled:t.flag},on:{blur:function(e){return e.preventDefault(),t.change_dataRuleValue(s)}},model:{value:a.dataRuleValue,callback:function(e){t.$set(a,"dataRuleValue","string"===typeof e?e.trim():e)},expression:"row.dataRuleValue"}}),e("el-row",{directives:[{name:"show",rawName:"v-show",value:t.computedRulewz(s),expression:"computedRulewz($index)"}]},[e("el-input",{staticStyle:{width:"65%"},attrs:{size:"small",placeholder:t.computed_dataRulewz_place(a.dataTmpselectwz),name:"name",title:t.computed_dataRulewz_place(a.dataTmpselectwz),disabled:t.flag},on:{blur:function(e){return e.preventDefault(),t.change_dataRulewz(s)}},model:{value:a.dataRulewz,callback:function(e){t.$set(a,"dataRulewz","string"===typeof e?e.trim():e)},expression:"row.dataRulewz"}}),t._v(" * 匹配位置取值配置 ")],1)]}}])})],1)},r=[],o=a("73eb"),n=o["a"],l=a("2877"),i=Object(l["a"])(n,s,r,!1,null,"067f4874",null);e["a"]=i.exports},"1a73":function(t,e,a){"use strict";a("a80b")},"3c65":function(t,e,a){"use strict";var s=a("23e7"),r=a("7b0b"),o=a("07fa"),n=a("3a34"),l=a("083a"),i=a("3511"),c=1!==[].unshift(0),d=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},u=c||!d();s({target:"Array",proto:!0,arity:1,forced:u},{unshift:function(t){var e=r(this),a=o(e),s=arguments.length;if(s){i(a+s);var c=a;while(c--){var d=c+s;c in e?e[d]=e[c]:l(e,d)}for(var u=0;u<s;u++)e[u]=arguments[u]}return n(e,a+s)}})},"57f7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("el-card",{attrs:{shadow:"never"}},[e("el-row",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{gutter:10}},[e("div",{staticStyle:{width:"300px",float:"left"}},[t._v(" 域名名称："+t._s(t.host)+" ")]),"app_Mod"==t.activeName?e("div",{staticClass:"el-icon-info",staticStyle:{"margin-left":"80px",float:"left"}},[e("span",{staticStyle:{color:"red"}},[t._v("注：")]),t._v("高级规则有用插件函数、且插件有变化，需要重启整个集群，使其生效")]):t._e(),e("div",{staticStyle:{float:"right"}},["refreshPreHeat"!==t.activeName?e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleAdd}},[t._v("添加")]):t._e(),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSave}},[t._v("保存")])],1)]),e("el-row",{staticStyle:{margin:"20px"}},[e("el-col",{attrs:{span:21}},[e("el-col",{attrs:{span:10}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("网站模式:")]),e("el-radio-group",{staticStyle:{"margin-right":"15px"},on:{change:function(e){return t.setbaseState("state")}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("el-radio",{attrs:{label:"on"}},[t._v("拦截")]),e("el-radio",{attrs:{label:"off"}},[t._v("放行")]),e("el-radio",{attrs:{label:"log"}},[t._v("日志")])],1),e("el-divider",{staticStyle:{"margin-left":"20px"},attrs:{direction:"vertical"}})],1),e("el-col",{attrs:{span:7}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("args_HPP:")]),e("el-radio-group",{staticStyle:{"margin-right":"15px"},on:{change:function(e){return t.setbaseState("args_HPP")}},model:{value:t.args_HPP,callback:function(e){t.args_HPP=e},expression:"args_HPP"}},[e("el-radio",{attrs:{label:"on"}},[t._v("on")]),e("el-radio",{attrs:{label:"off"}},[t._v("off")])],1),e("el-divider",{attrs:{direction:"vertical"}})],1),e("el-col",{attrs:{span:7}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("posts_HPP:")]),e("el-radio-group",{staticStyle:{"margin-right":"15px"},on:{change:function(e){return t.setbaseState("posts_HPP")}},model:{value:t.posts_HPP,callback:function(e){t.posts_HPP=e},expression:"posts_HPP"}},[e("el-radio",{attrs:{label:"on"}},[t._v("on")]),e("el-radio",{attrs:{label:"off"}},[t._v("off")])],1)],1)],1),e("el-col",{attrs:{span:3}},[e("div",{staticStyle:{float:"right"}},[e("span",{staticStyle:{color:"blue"}},[t._v("版本号：")]),t._v(t._s(t.version)+" ")])])],1),e("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"获取真实IP配置",name:"realIpFrom_Mod"}},[e("RealIp",{ref:"nodeReal",attrs:{witchName:"获取真实IP配置",host:t.host},on:{handleSet:t.handleSet}})],1),e("el-tab-pane",{attrs:{label:"IP规则配置",name:"ip_dict"}},[e("Ip",{ref:"nodeIp",attrs:{host:t.host}})],1),e("el-tab-pane",{attrs:{label:"高级规则",name:"app_Mod"}},[e("Adv",{ref:"node2",attrs:{switchName:"高级规则配置",host:t.host,name:"app_Mod"},on:{handleSet:t.handleSet,handleDel:t.handleDel}})],1),e("el-tab-pane",{attrs:{label:"频率规则",name:"network_Mod"}},[e("Adv",{ref:"node3",attrs:{switchName:"频率规则配置",host:t.host,name:"network_Mod"},on:{handleSet:t.handleSet,handleDel:t.handleDel}})],1),e("el-tab-pane",{attrs:{label:"CDN-添加header",name:"add_headers_Mod"}},[e("Adv",{ref:"node4",attrs:{switchName:"添加header头配置",host:t.host,name:"add_headers_Mod"},on:{handleSet:t.handleSet,handleDel:t.handleDel}})],1),e("el-tab-pane",{attrs:{label:"CDN-限速配置",name:"limit_rate_Mod"}},[e("Adv",{ref:"node5",attrs:{switchName:"限速模块配置",host:t.host,name:"limit_rate_Mod"},on:{handleSet:t.handleSet,handleDel:t.handleDel}})],1),e("el-tab-pane",{attrs:{label:"CDN-缓存规则",name:"proxy_cache_Mod"}},[e("Adv",{ref:"node6",attrs:{switchName:"内容缓存配置",host:t.host,name:"proxy_cache_Mod"},on:{handleSet:t.handleSet,handleDel:t.handleDel}})],1),e("el-tab-pane",{attrs:{label:"刷新预热",name:"refreshPreHeat"}},["refreshPreHeat"==t.activeName?e("Heat",{attrs:{host:t.host}}):t._e()],1)],1)],1),e("el-dialog",{attrs:{title:t.title,visible:t.open,width:"60%"},on:{"update:visible":function(e){t.open=e}}},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName2,callback:function(e){t.activeName2=e},expression:"activeName2"}},[e("el-tab-pane",{attrs:{label:"图形化配置",name:"second"}},["realIpFrom_Mod"==t.activeName?[e("el-form",{attrs:{"label-width":"120px",model:t.form.contents}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"域名："}},[e("el-input",{attrs:{placeholder:"输入域名",clearable:"",disabled:""},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Header头名称："}},[e("el-input",{attrs:{placeholder:"输入Header头名称",clearable:""},model:{value:t.form.contents.realipfrom,callback:function(e){t.$set(t.form.contents,"realipfrom",e)},expression:"form.contents.realipfrom"}})],1)],1),e("el-col",{staticStyle:{"line-height":"40px"},attrs:{span:12}},[t._v(" *存放用户ip头名称；eg:x_real_ip ")])],1)],1),t.open&&"second"==t.activeName2?e("PtComponent",{attrs:{data:t.ptData[t.activeName],ruleData:t.form.contents}}):t._e()]:t._e(),"ip_dict"==t.activeName?[e("el-form",{attrs:{"label-width":"100px",model:t.form.contents}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"匹配域名："}},[e("el-input",{attrs:{placeholder:"请输入匹配域名",disabled:""},model:{value:t.host,callback:function(e){t.host="string"===typeof e?e.trim():e},expression:"host"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"IP："}},[e("el-input",{attrs:{placeholder:"请输入IP"},model:{value:t.form.contents.ip,callback:function(e){t.$set(t.form.contents,"ip",e)},expression:"form.contents.ip"}})],1)],1)],1),e("el-form-item",{attrs:{label:"执行动作："}},[e("el-select",{attrs:{placeholder:"请选择动作"},model:{value:t.form.contents.value,callback:function(e){t.$set(t.form.contents,"value",e)},expression:"form.contents.value"}},t._l(t.valueOption,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"生效时间："}},[e("el-input",{attrs:{placeholder:"请输入生效时间"},model:{value:t.form.contents.time,callback:function(e){t.$set(t.form.contents,"time",t._n(e))},expression:"form.contents.time"}})],1)],1),e("el-col",{staticStyle:{"line-height":"40px"},attrs:{span:12}},[t._v(" *单位s;0表示永久生效 ")])],1)],1)]:t._e(),"app_Mod"==t.activeName?[e("el-form",{attrs:{"label-width":"135px",model:t.form.contents}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则ID："}},[e("el-input",{attrs:{placeholder:"输入ID信息",clearable:""},model:{value:t.form.contents.id,callback:function(e){t.$set(t.form.contents,"id",e)},expression:"form.contents.id"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则描述："}},[e("el-input",{attrs:{placeholder:"输入描述信息",clearable:""},model:{value:t.form.contents.des,callback:function(e){t.$set(t.form.contents,"des",e)},expression:"form.contents.des"}})],1)],1)],1),e("el-form-item",{attrs:{label:"是否启用："}},[e("el-switch",{attrs:{"active-value":"on","inactive-value":"off"},model:{value:t.form.contents.state,callback:function(e){t.$set(t.form.contents,"state",e)},expression:"form.contents.state"}})],1),e("el-form-item",{attrs:{label:"匹配规则：","label-width":"''"}},[t.open&&"second"==t.activeName2?e("PtComponent",{attrs:{data:t.ptData[t.activeName],ruleData:t.form.contents}}):t._e()],1),e("el-form-item",{attrs:{label:"是否显示app_ext："}},[e("el-switch",{attrs:{"active-value":"on","inactive-value":"off"},on:{change:t.switchChange},model:{value:t.app_state,callback:function(e){t.app_state=e},expression:"app_state"}})],1),e("el-form-item",{attrs:{"label-width":"''"}},[t.open&&"on"===t.app_state?e("GjComponent",{attrs:{data:t.appExtData,ruleList:t.form.contents.app_ext},on:{changeRule:t.changeRule}}):t._e()],1),e("el-form-item",{attrs:{label:"执行动作："}},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.actionChange},model:{value:t.form.contents.action,callback:function(e){t.$set(t.form.contents,"action",e)},expression:"form.contents.action"}},t._l(t.actionOption,(function(t){return e("el-option",{key:t.value,attrs:{label:`${t.name}(${t.value})`,value:t.value}})})),1)],1),e("el-form",{attrs:{"label-position":"top"}},["rehtml"==t.form.contents.action?e("el-form-item",{attrs:{label:"响应页面配置："}},[e("el-input",{attrs:{type:"textarea",rows:"8",placeholder:"请输入内容"},model:{value:t.form.contents.rehtml,callback:function(e){t.$set(t.form.contents,"rehtml",e)},expression:"form.contents.rehtml"}})],1):t._e()],1),"refile"==t.form.contents.action?[e("el-form-item",{attrs:{label:"文件名称："}},[e("el-row",[e("el-col",{attrs:{span:10}},[e("el-input",{attrs:{placeholder:"请输入文件名称"},model:{value:t.form.contents.refile[0],callback:function(e){t.$set(t.form.contents.refile,0,e)},expression:"form.contents.refile[0]"}})],1),e("el-col",{attrs:{span:10}},[e("div",{staticStyle:{color:"#999","line-height":"20px","margin-left":"10px"}},[t._v(" 匹配目录在：【基础配置 - htmlDir配置】"),e("br"),t._v(" eg:/opt/openresty/openstar/index/ ")])])],1)],1),e("el-form-item",{attrs:{label:"响应类型："}},[e("el-row",[e("el-col",{attrs:{span:10}},[e("el-input",{attrs:{placeholder:"请输入响应类型"},model:{value:t.form.contents.refile[1],callback:function(e){t.$set(t.form.contents.refile,1,e)},expression:"form.contents.refile[1]"}})],1),e("el-col",{attrs:{span:10}},[e("div",{staticStyle:{color:"#999","margin-left":"10px"}},[t._v(" conttent_type配置，可为空 ")])])],1)],1)]:t._e(),"func"==t.form.contents.action?[e("el-form-item",{attrs:{label:"函数名称："}},[e("el-select",{attrs:{placeholder:"请选择函数名称"},model:{value:t.form.contents.func[0],callback:function(e){t.$set(t.form.contents.func,0,e)},expression:"form.contents.func[0]"}},t._l(t.funcList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"函数参数："}},[e("vue-json-editor",{staticClass:"editorR",attrs:{mode:"code",lang:"zh"},model:{value:t.form.contents.func[1],callback:function(e){t.$set(t.form.contents.func,1,e)},expression:"form.contents.func[1]"}})],1)]:t._e()],2)]:t._e(),"network_Mod"==t.activeName?[e("el-form",{attrs:{"label-width":"100px",model:t.form.contents}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则ID："}},[e("el-input",{attrs:{placeholder:"输入ID信息",clearable:""},model:{value:t.form.contents.id,callback:function(e){t.$set(t.form.contents,"id",e)},expression:"form.contents.id"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"描述信息："}},[e("el-input",{attrs:{placeholder:"输入描述信息",clearable:""},model:{value:t.form.contents.des,callback:function(e){t.$set(t.form.contents,"des",e)},expression:"form.contents.des"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否启用："}},[e("el-switch",{attrs:{"active-value":"on","inactive-value":"off"},model:{value:t.form.contents.state,callback:function(e){t.$set(t.form.contents,"state",e)},expression:"form.contents.state"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"WAF标识："}},[e("el-input",{attrs:{placeholder:"输入WAF标识",clearable:""},model:{value:t.form.contents.waf,callback:function(e){t.$set(t.form.contents,"waf",e)},expression:"form.contents.waf"}})],1)],1)],1),e("el-form-item",{attrs:{label:"匹配规则：","label-width":"''"}},[t.open&&"second"==t.activeName2?e("PtComponent",{attrs:{data:t.ptData[t.activeName],ruleData:t.form.contents}}):t._e()],1),e("el-form-item",{attrs:{label:"","label-width":"''"}},[e("el-table",{attrs:{data:t.networkData,border:"","header-row-style":{"line-height":"23px"}}},[e("el-table-column",{attrs:{label:"匹配位置",align:"center",prop:"wz",width:"80"}}),e("el-table-column",{attrs:{label:"时间窗口（单位：s）",align:"center",prop:"pTime"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-input",{attrs:{placeholder:"请输入时间"},on:{input:e=>t.form.contents.network.pTime=1*e},model:{value:a.pTime,callback:function(e){t.$set(a,"pTime",t._n(e))},expression:"row.pTime"}})]}}],null,!1,3538172501)}),e("el-table-column",{attrs:{label:"请求次数",align:"center",prop:"maxReqs"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-input",{attrs:{placeholder:"请输入请求次数"},on:{input:e=>t.form.contents.network.maxReqs=1*e},model:{value:a.maxReqs,callback:function(e){t.$set(a,"maxReqs",t._n(e))},expression:"row.maxReqs"}})]}}],null,!1,27703091)}),e("el-table-column",{attrs:{label:"拦截时长（单位：s）",align:"center",prop:"blackTime"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-input",{attrs:{placeholder:"请输入请求次数"},on:{input:e=>t.form.contents.network.blackTime=1*e},model:{value:a.blackTime,callback:function(e){t.$set(a,"blackTime",t._n(e))},expression:"row.blackTime"}})]}}],null,!1,2277459411)})],1)],1)],1)]:t._e(),"add_headers_Mod"==t.activeName?[e("el-form",{ref:"editform",attrs:{model:t.form.contents,"label-width":"90px"}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则Id"}},[e("el-input",{attrs:{placeholder:"输入id信息"},model:{value:t.form.contents.id,callback:function(e){t.$set(t.form.contents,"id",e)},expression:"form.contents.id"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则描述"}},[e("el-input",{attrs:{placeholder:"输入规则描述"},model:{value:t.form.contents.des,callback:function(e){t.$set(t.form.contents,"des",e)},expression:"form.contents.des"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否启用"}},[e("el-switch",{attrs:{"active-value":"on","inactive-value":"off"},model:{value:t.form.contents.state,callback:function(e){t.$set(t.form.contents,"state",e)},expression:"form.contents.state"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"跳过标识"}},[e("el-input",{attrs:{placeholder:"输入 *_Mod"},model:{value:t.form.contents.tag,callback:function(e){t.$set(t.form.contents,"tag",e)},expression:"form.contents.tag"}})],1)],1)],1),e("el-row",[e("el-form-item",{attrs:{label:"匹配规则"}},[t.open&&"second"==t.activeName2?e("PtComponent",{attrs:{data:t.ptData[t.activeName],ruleData:t.form.contents}}):t._e()],1)],1),e("el-row",[e("el-form-item",{attrs:{label:"响应头配置"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.headerData,border:"","header-row-style":{"line-height":"23px"}}},[e("el-table-column",{attrs:{label:"header头名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"请输入Header头名称",size:"small"},on:{change:e=>t.changeName(e,a.$index)},model:{value:a.row["name"],callback:function(e){t.$set(a.row,"name","string"===typeof e?e.trim():e)},expression:"scope.row['name']"}})]}}],null,!1,910402352)}),e("el-table-column",{attrs:{label:"添加内容"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"请输入添加内容",size:"small"},on:{change:e=>t.changeContent(e,a.$index)},model:{value:a.row["content"],callback:function(e){t.$set(a.row,"content","string"===typeof e?e.trim():e)},expression:"scope.row['content']"}})]}}],null,!1,3640607041)}),e("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(a){return[0===a.$index?e("el-button",{attrs:{type:"text"},on:{click:t.addHeaderRow}},[t._v("新增行")]):e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.delHeaderRow(a.$index)}}},[t._v("删除行")])]}}],null,!1,3716974993)})],1)],1)],1),e("el-row",[e("el-form-item",{attrs:{label:"请求头配置"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.req_headerData,border:"","header-row-style":{"line-height":"23px"}}},[e("el-table-column",{attrs:{label:"header头名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"请输入Header头名称",size:"small"},on:{change:e=>t.changereqName(e,a.$index)},model:{value:a.row["name"],callback:function(e){t.$set(a.row,"name","string"===typeof e?e.trim():e)},expression:"scope.row['name']"}})]}}],null,!1,1186972982)}),e("el-table-column",{attrs:{label:"添加内容"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"请输入添加内容",size:"small"},on:{change:e=>t.changereqContent(e,a.$index)},model:{value:a.row["content"],callback:function(e){t.$set(a.row,"content","string"===typeof e?e.trim():e)},expression:"scope.row['content']"}})]}}],null,!1,2555658119)}),e("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(a){return[0===a.$index?e("el-button",{attrs:{type:"text"},on:{click:t.addreqHeaderRow}},[t._v("新增行")]):e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.delreqHeaderRow(a.$index)}}},[t._v("删除行")])]}}],null,!1,2516884337)})],1)],1)],1)],1)]:t._e(),"limit_rate_Mod"==t.activeName?[e("el-form",{attrs:{"label-width":"100px",model:t.form.contents}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则ID："}},[e("el-input",{attrs:{placeholder:"输入ID信息",clearable:""},model:{value:t.form.contents.id,callback:function(e){t.$set(t.form.contents,"id",e)},expression:"form.contents.id"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"描述信息："}},[e("el-input",{attrs:{placeholder:"输入描述信息",clearable:""},model:{value:t.form.contents.des,callback:function(e){t.$set(t.form.contents,"des",e)},expression:"form.contents.des"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否启用："}},[e("el-switch",{attrs:{"active-value":"on","inactive-value":"off"},model:{value:t.form.contents.state,callback:function(e){t.$set(t.form.contents,"state",e)},expression:"form.contents.state"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"跳过标识："}},[e("el-select",{attrs:{placeholder:"输入跳过标识",clearable:"","allow-create":"",filterable:"","default-first-option":"",multiple:""},model:{value:t.form.contents.tag,callback:function(e){t.$set(t.form.contents,"tag",e)},expression:"form.contents.tag"}})],1)],1)],1),e("el-form-item",{attrs:{label:"匹配规则：","label-width":"''"}},[t.open&&"second"==t.activeName2?e("PtComponent",{attrs:{data:t.ptData[t.activeName],ruleData:t.form.contents}}):t._e()],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"限速配置："}},[e("el-input",{attrs:{placeholder:"输入限速参数"},model:{value:t.form.contents.limit_rate,callback:function(e){t.$set(t.form.contents,"limit_rate",e)},expression:"form.contents.limit_rate"}})],1)],1),e("el-col",{staticStyle:{"line-height":"40px"},attrs:{span:12}},[t._v(" *直接使用nginx配置单位（k/mb...） ")])],1)],1)]:t._e(),"proxy_cache_Mod"==t.activeName?[e("el-form",{attrs:{"label-width":"100px",model:t.form.contents}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则ID："}},[e("el-input",{attrs:{placeholder:"输入ID信息",clearable:""},model:{value:t.form.contents.id,callback:function(e){t.$set(t.form.contents,"id",e)},expression:"form.contents.id"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"描述信息："}},[e("el-input",{attrs:{placeholder:"输入描述信息",clearable:""},model:{value:t.form.contents.des,callback:function(e){t.$set(t.form.contents,"des",e)},expression:"form.contents.des"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否启用："}},[e("el-switch",{attrs:{"active-value":"on","inactive-value":"off"},model:{value:t.form.contents.state,callback:function(e){t.$set(t.form.contents,"state",e)},expression:"form.contents.state"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"跳过标识："}},[e("el-select",{attrs:{placeholder:"输入跳过标识",clearable:"","allow-create":"",filterable:"","default-first-option":"",multiple:""},model:{value:t.form.contents.tag,callback:function(e){t.$set(t.form.contents,"tag",e)},expression:"form.contents.tag"}})],1)],1)],1),e("el-form-item",{attrs:{label:"匹配规则：","label-width":"''"}},[t.open&&"second"==t.activeName2?e("PtComponent",{attrs:{data:t.ptData[t.activeName],ruleData:t.form.contents}}):t._e()],1)],1)]:t._e()],2),e("el-tab-pane",{attrs:{label:"原始JSON配置",name:"first"}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},["first"===t.activeName2?e("vue-json-editor",{staticClass:"editorR",attrs:{mode:"code",lang:"zh"},model:{value:t.form.contents,callback:function(e){t.$set(t.form,"contents",e)},expression:"form.contents"}}):t._e()],1),e("el-col",{attrs:{span:12}},["first"===t.activeName2?e("codemirror",{staticClass:"editorR",attrs:{options:t.options},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}):t._e(),e("br"),e("el-link",{attrs:{href:"https://www.kancloud.cn/openstar/install/1136671",target:"_blank"}},[t._v("详情请点击此处，参考文档")])],1)],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),e("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},r=[],o=(a("14d9"),a("3c65"),a("9448")),n=a("e13e"),l=a("090c"),i=function(){var t=this,e=t._self._c;return e("div",[e("el-row",{staticStyle:{margin:"20px"}},[e("el-col",{attrs:{span:12}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("获取真实IP配置:")]),e("el-radio",{attrs:{disabled:"",label:"on"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[t._v("on")]),e("el-radio",{attrs:{disabled:"",label:"off"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[t._v("off")])],1),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{float:"right"}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("当前数量："+t._s(t.count))]),e("span",{staticStyle:{color:"blue"}},[t._v("版本号：")]),t._v(t._s(t.version)+" ")])])],1),e("el-table",{attrs:{data:t.userList,border:""}},[e("el-table-column",{attrs:{label:"域名",align:"left",prop:"id",width:"320","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"JSON数据",align:"left",prop:"contents","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"120","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleSet(a.row)}}},[t._v("编辑")]),e("el-popover",{attrs:{placement:"top",width:"160"},model:{value:a.row.visible,callback:function(e){t.$set(a.row,"visible",e)},expression:"scope.row.visible"}},[e("p",[t._v("确定要删除吗?")]),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){a.row.visible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleDel(a.row)}}},[t._v("确定")])],1),e("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)},c=[],d=a("a417"),u={props:["host"],data(){return{state:"",count:0,version:"",userList:[],tempList:[]}},mounted(){this.getList()},methods:{getList(){var t={action:"get",mod:"realIpFrom_Mod"};Object(d["b"])(t).then(t=>{if(t.msg)if(this.state=t.msg.state,this.version=t.msg.G_version,t.msg[this.host]){var e={id:this.host,contents:JSON.stringify(t.msg[this.host])};this.userList=[e],this.tempList=[e],this.count=this.userList.length}else this.userList=[],this.tempList=[],this.count=0;else this.userList=[],this.tempList=[],this.count=0})},handleSet(t){this.$emit("handleSet",t)},handleDel(t){var e={action:"del",mod:"realIpFrom_Mod",id:this.host};Object(d["b"])(e).then(t=>{"ok"===t.code?(this.$notify({title:"成功",message:t.msg,type:"success"}),this.getList()):this.$notify({title:"警告",message:t.msg,type:"warning"})})}}},h=u,m=a("2877"),p=Object(m["a"])(h,i,c,!1,null,null,null),f=p.exports,_=function(){var t=this,e=t._self._c;return e("div",[e("el-row",{staticStyle:{margin:"20px"}},[e("el-col",{attrs:{span:12}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("IP规则配置:")]),e("el-radio",{attrs:{disabled:"",label:"on"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[t._v("on")]),e("el-radio",{attrs:{disabled:"",label:"off"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[t._v("off")])],1),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{float:"right"}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("当前数量："+t._s(t.count))]),e("span",{staticStyle:{color:"blue"}},[t._v("版本号：")]),t._v(t._s(t.version)+" ")])])],1),e("el-table",{attrs:{data:t.userList,border:""}},[e("el-table-column",{attrs:{label:"域名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.host)+" ")]}}])}),e("el-table-column",{attrs:{label:"ip"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.ip)+" ")]}}])}),e("el-table-column",{attrs:{label:"动作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.option)+" ")]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"360","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"top",width:"160"},model:{value:a.row.visible,callback:function(e){t.$set(a.row,"visible",e)},expression:"scope.row.visible"}},[e("p",[t._v("确定要删除吗?")]),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){a.row.visible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleDel(a.row)}}},[t._v("确定")])],1),e("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)},b=[],g=a("b1ef"),v={props:["host"],data(){return{state:"",count:0,version:"",userList:[],tempList:[]}},mounted(){this.getList()},methods:{getList(){var t={action:"get",host:this.host};Object(g["a"])(t).then(t=>{var e=t.msg,a=[];for(var s in e)if("state"!==s&&"count"!==s){var r={},o=s.split("_");1==o.length?(r.host="*",r.ip=o[0]):(r.host=o[0],r.ip=o[1]),r.option=e[s],a.push(r)}this.userList=a,this.tempList=a,this.count=a.length,this.state=e.state.state,this.version=e.state.G_version})},handleDel(t){var e={action:"del",ip:t.host+"_"+t.ip};Object(g["a"])(e).then(t=>{"ok"===t.code?(this.$notify({title:"成功",message:t.msg,type:"success"}),this.getList()):this.$notify({title:"警告",message:t.msg,type:"warning"})})}}},w=v,y=Object(m["a"])(w,_,b,!1,null,null,null),k=y.exports,$=function(){var t=this,e=t._self._c;return e("div",[e("el-row",{staticStyle:{margin:"20px"}},[e("el-col",{attrs:{span:12}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v(t._s(t.switchName))]),e("el-radio-group",{staticStyle:{"margin-right":"15px"},on:{change:function(e){return t.setbaseState()}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("el-radio",{attrs:{label:"on"}},[t._v("on")]),e("el-radio",{attrs:{label:"off"}},[t._v("off")])],1)],1),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{float:"right"}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("当前数量："+t._s(t.count))])])])],1),e("el-table",{attrs:{data:t.userList,border:""}},[e("el-table-column",{attrs:{label:"ID",align:"center",prop:"id",width:"80","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"内容",align:"left",prop:"contents","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"360","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleSet(a.row)}}},[t._v("编辑")]),e("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-top"},on:{click:function(e){return t.up(a.$index)}}},[t._v("上移")]),e("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-bottom"},on:{click:function(e){return t.down(a.$index)}}},[t._v("下移")]),e("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-arrow-up"},on:{click:function(e){return t.upIndex(a.$index)}}},[t._v("置顶")]),e("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-arrow-down"},on:{click:function(e){return t.downIndex(a.$index)}}},[t._v("置底")]),e("el-popover",{attrs:{placement:"top",width:"160"},model:{value:a.row.visible,callback:function(e){t.$set(a.row,"visible",e)},expression:"scope.row.visible"}},[e("p",[t._v("确定要删除吗?")]),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){a.row.visible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleDel(a.row)}}},[t._v("确定")])],1),e("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),e("el-row",[e("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleApply}},[t._v("应用")])],1)])],1)},j=[],x=a("5919"),T={props:["host","name","switchName"],data(){return{state:"on",count:0,userList:[],tempList:[]}},mounted(){this.getList()},methods:{up(t){0!==t&&this.swapItems(this.userList,t,t-1)},upIndex(t){0!==t&&this.swapItems(this.userList,t,0,"up")},down(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,t+1)},downIndex(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,0,"down")},swapItems(t,e,a,s){return"up"==s?(t.unshift(t[e]),t.splice(e+1,1),t):"down"==s?(t.push(t[e]),t.splice(e,1),t):(t[e]=t.splice(a,1,t[e])[0],t)},getList(){var t={action:"get",mod:this.name,host:this.host};Object(x["c"])(t).then(t=>{var e=t.msg.mod,a=[];for(var s in e)if("count"!=s&&"G_version"!=s&&"state"!=s){var r={};r.id=parseInt(s)+1,r.contents=JSON.stringify(e[s]),a.push(r)}this.userList=a,this.tempList=a,this.count=a.length,this.state=t.msg[this.name]})},setbaseState(){var t={action:"set",host:this.host,id:this.name,value:this.state};Object(x["c"])(t).then(t=>{"ok"===t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})},handleSet(t){this.$emit("handleSet",t)},handleDel(t){this.$emit("handleDel",t)},handleApply(){var t=this.userList.map(t=>JSON.parse(t.contents)),e={action:"set",mod:this.name,host:this.host,value:JSON.stringify(t)};Object(x["c"])(e).then(t=>{"ok"==t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})}}},D=T,S=Object(m["a"])(D,$,j,!1,null,null,null),O=S.exports,L=a("8f94"),N=(a("a7be"),a("acdf"),a("7ba3"),a("a8d9"),a("db91"),a("b2b9"),a("f9d4"),a("45a3")),R=a("85c8"),M=function(){var t=this,e=t._self._c;return e("div",[e("el-row",{attrs:{gutter:10}},[e("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:24}},[e("el-radio-group",{model:{value:t.dir,callback:function(e){t.dir=e},expression:"dir"}},[e("el-radio",{attrs:{label:"url"}},[t._v("刷新url")]),e("el-radio",{attrs:{label:"dir"}},[t._v("刷新目录(前缀)")]),e("el-radio",{attrs:{label:"resource"}},[t._v("预热资源")])],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("vue-json-editor",{staticClass:"editorR",attrs:{mode:"code",lang:"zh"},model:{value:t.contents,callback:function(e){t.contents=e},expression:"contents"}})],1),e("el-col",{staticStyle:{color:"rgba(80, 80, 80, 1)","font-size":"12px"},attrs:{span:12}},[e("codemirror",{staticClass:"editorR",attrs:{options:t.options},model:{value:t.code[t.dir],callback:function(e){t.$set(t.code,t.dir,e)},expression:"code[dir]"}}),e("br"),e("el-link",{attrs:{href:"https://www.kancloud.cn/openstar/install/1136671",target:"_blank"}},[t._v("详情请点击此处，参考文档")])],1)],1),e("el-row",[e("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("确定")])],1)])],1)},z=[],I={components:{vueJsonEditor:N["a"],codemirror:L["codemirror"]},props:["host"],data(){return{dir:"url",contents:"",code:{url:'\n*eg:\n\n[\n    "/favicon.ico",\n    "/1.jpg?version=1.0.1"\n]\n\n',dir:'\n*eg:\n\n[\n    "/js/",\n    "/img"\n]\n\n',resource:'\n*eg:\n\n[\n    "/favicon.ico",\n    "/1.jpg?version=1.0.1"\n]\n\n'},options:{tabSize:4,mode:{name:"javascript",json:!0},theme:"darcula",lineNumbers:!0,line:!0,lineWrapping:!0,styleSelectedText:!0,styleActiveLine:!0,hintOptions:{completeSingle:!0}}}},created(){},methods:{submit(){if("resource"==this.dir){let t={purge_list:this.contents,host:this.host};return void Object(R["b"])(t).then(t=>{"ok"==t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})}let t={purge_list:this.contents,host:this.host,dir:"url"===this.dir?"false":"true"};Object(R["a"])(t).then(t=>{"ok"==t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})}}},P=I,E=Object(m["a"])(P,M,z,!1,null,"741afe69",null),C=E.exports;const A=a("e762").Base64;var q={components:{vueJsonEditor:N["a"],codemirror:L["codemirror"],RealIp:f,Ip:k,Adv:O,Heat:C,PtComponent:l["a"],GjComponent:n["a"]},data(){return{openCahe:!1,cacheContent:{},code2:'/* * eg: */\n{\n    "www.test.com":[\n    "/favicon.ico",\n    "/1.jpg?version=1.0.1"\n     ],\n    "www.abc.com":[\n    "/favicon.ico",\n    "/1.jpg"\n    ]\n}',host:"",state:"",args_HPP:"",posts_HPP:"",version:"",options:{tabSize:4,mode:{name:"javascript",json:!0},theme:"darcula",lineNumbers:!0,line:!0,lineWrapping:!0,styleSelectedText:!0,styleActiveLine:!0,hintOptions:{completeSingle:!0}},code:"",activeName:"realIpFrom_Mod",open:!1,title:"",form:{id:0,contents:{}},activeName2:"second",ptData:{realIpFrom_Mod:[{dataTmpselectwz:"ips",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}],app_Mod:[{dataTmpselectwz:"uri",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}],network_Mod:[{dataTmpselectwz:"uri",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}],add_headers_Mod:[{dataTmpselectwz:"uri",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}],limit_rate_Mod:[{dataTmpselectwz:"uri",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}],proxy_cache_Mod:[{dataTmpselectwz:"uri",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}]},valueOption:[{label:"拦截",value:"deny"},{label:"放行",value:"allow"},{label:"仅记录",value:"log"}],app_state:"on",actionOption:[{name:"拦截",value:"deny"},{name:"放行",value:"allow"},{name:"调试",value:"debug"},{name:"响应HTML",value:"rehtml"},{name:"响应文件",value:"refile"},{name:"插件函数",value:"func"}],appExtData:[{dataTmpselectwz:"",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}],funcList:[],networkData:[{wz:"ip",pTime:"",maxReqs:"",blackTime:""}],headerData:[{}],req_headerData:[{}]}},computed:{app_state1(){return this.appExtData.length>0?"on":"off"}},created(){this.host=this.$route.query.domain,this.getList(),this.getFuncList()},methods:{handleClick(){"network_Mod"==this.activeName&&(this.networkData=[{...this.form.contents.network,wz:"ip"}]),"add_headers_Mod"==this.activeName&&(this.form.contents.add_headers.forEach((t,e)=>{this.$set(this.headerData[e],"name",t[0]),this.$set(this.headerData[e],"content",t[1])}),this.form.contents.add_req_headers.forEach((t,e)=>{this.$set(this.req_headerData[e],"name",t[0]),this.$set(this.req_headerData[e],"content",t[1])}))},changeName(t,e){this.form.contents.add_headers||(this.form.contents.add_headers=[]),this.form.contents.add_headers[e]||(this.form.contents.add_headers[e]=[]),this.form.contents.add_headers[e][0]=t},changereqName(t,e){this.form.contents.add_req_headers||(this.form.contents.add_req_headers=[]),this.form.contents.add_req_headers[e]||(this.form.contents.add_req_headers[e]=[]),this.form.contents.add_req_headers[e][0]=t},changeContent(t,e){this.form.contents.add_headers||(this.form.contents.add_headers=[]),this.form.contents.add_headers[e]||(this.form.contents.add_headers[e]=[]),this.form.contents.add_headers[e][1]=t},changereqContent(t,e){this.form.contents.add_req_headers||(this.form.contents.add_req_headers=[]),this.form.contents.add_req_headers[e]||(this.form.contents.add_req_headers[e]=[]),this.form.contents.add_req_headers[e][1]=t},addHeaderRow(){this.headerData.push({})},addreqHeaderRow(){this.req_headerData.push({})},delHeaderRow(t){this.headerData.splice(t,1),this.form.contents.add_headers.splice(t,1)},delreqHeaderRow(t){this.req_headerData.splice(t,1),this.form.contents.add_req_headers.splice(t,1)},getFuncList(){var t={id:"all_Mod"};Object(o["c"])(t).then(t=>{var e=t.msg,a=[];for(var s in e)if("count"!=s){var r=e[s],o={};o.name=s,o.file=r.file,o.disk_file=r.disk_file,o.description=r.description,o.contents=r.contents,a.push(o)}this.funcList=a,console.log(this.funcList)})},changeRule(t){this.form.contents.app_ext=t},actionChange(t){"refile"===t?this.$set(this.form.contents,"refile",[]):delete this.form.contents.refile,"func"===t?this.$set(this.form.contents,"func",[]):delete this.form.contents.func},switchChange(t){this.app_state},isJSON(t){try{var e=JSON.parse(t);return!("object"!=typeof e||!e)}catch(a){return!1}},up(t){0!==t&&this.swapItems(this.userList,t,t-1)},upIndex(t){0!==t&&this.swapItems(this.userList,t,0,"up")},down(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,t+1)},downIndex(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,0,"down")},swapItems(t,e,a,s){return"up"==s?(t.unshift(t[e]),t.splice(e+1,1),t):"down"==s?(t.push(t[e]),t.splice(e,1),t):(t[e]=t.splice(a,1,t[e])[0],t)},reset(){this.form={id:0,contents:{}},["ip_dict","realIpFrom_Mod"].includes(this.activeName)||(this.form.contents.state="on"),this.ptData=this.$options.data().ptData,this.appExtData=this.$options.data().appExtData,this.app_state=this.$options.data().app_state,this.networkData=this.$options.data().networkData,this.headerData=this.$options.data().headerData,this.req_headerData=this.$options.data().req_headerData,"network_Mod"===this.activeName&&(this.form.contents.network={})},cancel(){this.open=!1,this.openCahe=!1,this.reset()},handleDel(t){console.log("handleDel del ",t);var e={action:"del",mod:this.activeName,id:t.id,host:this.host};Object(x["c"])(e).then(t=>{if("ok"===t.code)switch(this.$notify({title:"成功",message:t.msg,type:"success"}),this.activeName){case"realIpFrom_Mod":this.$refs.nodeReal.getList();break;case"ip_dict":console.log("activeName is ip_dict del"),this.$refs.nodeIp.getList();break;case"app_Mod":this.$refs.node2.getList();break;case"network_Mod":this.$refs.node3.getList();break;case"add_headers_Mod":this.$refs.node4.getList();break;case"limit_rate_Mod":this.$refs.node5.getList();break;case"proxy_cache_Mod":this.$refs.node6.getList();break;default:break}else this.$notify({title:"警告",message:t.msg,type:"warning"})})},handleAdd(){switch(this.reset(),this.title="添加",this.activeName){case"realIpFrom_Mod":this.code='\n\n/*\n* 该规则是配置有使用CDN或者其他中转反向代理的域名，默认情况下，\n* CDN或者其他代理会把用户真实IP放在x-forword-for 或者x-real-ip中，\n* 故http头名称则设置为：x_forword_for（"-"需要换成"_"）。\n* 部分CDN放在一个自定义字段中，需要和其确定在那个字段（"-"需要换成"_"）。\n*/\n\n{\n    "ips":["匹配内容","匹配符","是否取反"],\n    "realipfrom": "http头名称"\n}\n\n\n';break;case"ip_dict":this.code='\n\n/*\n* ip 不支持ip段仅支持单ip\n* 单位秒，0表示永久\n* value: deny/log/allow\n*/\n\n{\n    "ip": "111.111.111.111",\n    "value": "log",\n    "time": 120\n}\n\n\n';break;case"app_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "id":"规则ID: host_Mod.app_Mod-1000",\n    "des": "规则描述",\n    "action": "执行动作(deny|allow|debug|refile|rehtml|func)",\n    "执行动作": "动作参数",\n    /* "refile": ["2.txt","text/html"], */\n    /* "rehtml": "<html>hi~!</html>", */\n    /* "func": ["函数名称",{函数参数}], */\n    "uri":["匹配内容","匹配符","是否取反"],\n    "app_ext": ["规则内容(table)"...]\n}\n\n\n';break;case"network_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "network": {"maxReqs":1000,"pTime":10,"blackTime":120}\n}\n\n\n';break;case"add_headers_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "add_headers":[["header头名称","内容"]],\n    "add_req_headers":[["header头名称","内容"]],\n    "tag":["all_Mod"]\n    /* tag 也可以没有 */\n}\n\n';break;case"limit_rate_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "limit_rate":"限速大小",\n    "tag":["all_Mod"]\n    /* tag 也可以没有 */\n}\n\n';break;case"proxy_cache_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "tag":["all_Mod"]\n    /* tag 也可以没有 */\n}\n\n\n';break;default:break}this.open=!0},handleSet(t){switch(this.reset(),this.title="编辑",this.activeName){case"realIpFrom_Mod":this.code='\n\n\n/*\n* 该规则是配置有使用CDN或者其他中转反向代理的域名，默认情况下，\n* CDN或者其他代理会把用户真实IP放在x-forword-for 或者x-real-ip中，\n* 故http头名称则设置为：x_forword_for（"-"需要换成"_"）。\n* 部分CDN放在一个自定义字段中，需要和其确定在那个字段（"-"需要换成"_"）。\n*/\n\n{\n    "ips":["匹配内容","匹配符","是否取反"],\n    "realipfrom": "http头名称",\n}\n\n\n';break;case"ip_dict":this.code='\n\n/*\n* ip 不支持ip段仅支持单ip\n* 单位秒，0表示永久\n* value: deny/log/allow\n*/\n\n{\n    "ip": "111.111.111.111",\n    "value": "log",\n    "time": 120\n}\n\n\n';break;case"app_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "id":"规则ID:host_Mod.app_Mod-1000",\n    "des": "规则描述",\n    "action": "执行动作(deny|allow|debug|refile|rehtml|func)",\n    "执行动作": "动作参数",\n    /* "refile": ["2.txt","text/html"], */\n    /* "rehtml": "<html>hi~!</html>", */\n    /* "func": ["函数名称",{函数参数}], */\n    "uri":["匹配内容","匹配符","是否取反"],\n    "app_ext": ["规则内容(table)"...]\n}\n\n\n';break;case"network_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "network": {"maxReqs":1000,"pTime":10,"blackTime":120}\n}\n\n';break;case"add_headers_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "add_headers":[["header头名称","内容"]],\n    "add_req_headers":[["header头名称","内容"]],\n    "tag":["all_Mod"]\n    /* tag 也可以没有 */\n}\n\n\n';break;case"limit_rate_Mod":this.code='\n{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "limit_rate":"限速大小",\n    "tag":["all_Mod"]\n    /* tag 也可以没有 */\n}\n\n\n';break;case"proxy_cache_Mod":this.code='\n\n{\n    "state": "规则开关",\n    "des": "规则描述",\n    "uri":["匹配内容","匹配符","是否取反"],\n    "hostname":["匹配内容","匹配符","是否取反"],\n    "tag":["all_Mod"]\n    /* tag 也可以没有 */\n}\n\n\n';break;default:break}if(this.form.id=t.id,this.form.contents=JSON.parse(t.contents),"network_Mod"===this.activeName){var{blackTime:e,maxReqs:a,pTime:s}=this.form.contents.network;this.networkData=[{blackTime:e,maxReqs:a,pTime:s}]}"add_headers_Mod"===this.activeName&&(this.form.contents.add_headers.forEach((t,e)=>{this.$set(this.headerData[e],"name",t[0]),this.$set(this.headerData[e],"content",t[1])}),this.form.contents.add_req_headers.forEach((t,e)=>{this.$set(this.req_headerData[e],"name",t[0]),this.$set(this.req_headerData[e],"content",t[1])})),this.open=!0},getList(){var t={host:this.host,action:"get"};Object(x["c"])(t).then(t=>{var e=t.msg;this.state=e.state,this.args_HPP=e.args_HPP,this.posts_HPP=e.posts_HPP,this.version=e.g_version})},setbaseState(t){var e=this.state;switch(t){case"args_HPP":e=this.args_HPP;break;case"posts_HPP":e=this.posts_HPP;break;default:break}var a={action:"set",host:this.host,id:t,value:e};Object(x["c"])(a).then(t=>{"ok"===t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})},async submitForm(t){var e;if("添加"===this.title)switch(this.activeName){case"realIpFrom_Mod":var a={action:"add",mod:this.activeName,id:this.host,value:JSON.stringify(this.form.contents)};e=await Object(d["b"])(a),"ok"===e.code?(this.$notify({title:"成功",message:e.msg,type:"success"}),this.open=!1,this.$refs.nodeReal.getList()):this.$notify({title:"警告",message:e.msg,type:"warning"});break;case"ip_dict":a={action:"set",ip:this.host+"_"+this.form.contents.ip,value:this.form.contents.value,time:this.form.contents.time};e=await Object(g["a"])(a),"ok"===e.code?(this.$notify({title:"成功",message:e.msg,type:"success"}),this.open=!1,this.$refs.nodeIp.getList()):this.$notify({title:"警告",message:e.msg,type:"warning"});break;default:a={action:"add",mod:this.activeName,host:this.host,value:JSON.stringify(this.form.contents)};if(e=await Object(x["c"])(a),"ok"===e.code)switch(this.$notify({title:"成功",message:e.msg,type:"success"}),this.open=!1,this.activeName){case"realIpFrom_Mod":this.$refs.nodeReal.getList();break;case"ip_dict":this.$refs.nodeIp.getList();break;case"app_Mod":this.$refs.node2.getList();break;case"network_Mod":this.$refs.node3.getList();break;case"add_headers_Mod":this.$refs.node4.getList();break;case"limit_rate_Mod":this.$refs.node5.getList();break;case"proxy_cache_Mod":this.$refs.node6.getList();break;default:break}else this.$notify({title:"警告",message:e.msg,type:"warning"});break}else switch(this.activeName){case"realIpFrom_Mod":a={action:"set",mod:this.activeName,id:this.host,value:JSON.stringify(this.form.contents)};e=await Object(d["b"])(a),"ok"===e.code?(this.$notify({title:"成功",message:e.msg,type:"success"}),this.open=!1,this.$refs.nodeReal.getList()):this.$notify({title:"警告",message:e.msg,type:"warning"});break;case"ip_dict":break;default:a={action:"set",mod:this.activeName,host:this.host,id:parseInt(this.form.id),value:JSON.stringify(this.form.contents)};if(e=await Object(x["c"])(a),"ok"===e.code)switch(this.$notify({title:"成功",message:e.msg,type:"success"}),this.open=!1,this.activeName){case"realIpFrom_Mod":this.$refs.nodeReal.getList();break;case"ip_dict":this.$refs.nodeIp.getList();break;case"app_Mod":this.$refs.node2.getList();break;case"network_Mod":this.$refs.node3.getList();break;case"add_headers_Mod":this.$refs.node4.getList();break;case"limit_rate_Mod":this.$refs.node5.getList();break;case"proxy_cache_Mod":this.$refs.node6.getList();break;default:break}else this.$notify({title:"警告",message:e.msg,type:"warning"});break}},handleClean(){this.cacheContent={},this.openCahe=!0},cleanApi(){if(!this.isJSON(JSON.stringify(this.cacheContent)))return this.$message.error("配置内容:json格式错误/没有内容"),!1;var t={host:this.host,purge_list:JSON.stringify(this.cacheContent)};Object(R["a"])(t).then(t=>{"ok"===t.code?(this.$notify({title:"成功",message:t.msg,type:"success"}),this.openCahe=!1):this.$notify({title:"警告",message:t.msg,type:"warning"})})},handleSave(){var t={action:"save",mod:"all_Mod"};Object(d["h"])(t).then(t=>{"ok"==t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})}},filters:{match:function(t){return A.decode(t)}},watch:{$route(t,e){},activeName:{handler:function(t,e){switch(this.activeName){case"realIpFrom_Mod":this.$refs.nodeReal.getList();break;case"ip_dict":this.$refs.nodeIp.getList();break;case"app_Mod":this.$refs.node2.getList();break;case"network_Mod":this.$refs.node3.getList();break;case"add_headers_Mod":this.$refs.node4.getList();break;case"limit_rate_Mod":this.$refs.node5.getList();break;case"proxy_cache_Mod":this.$refs.node6.getList();break;default:break}}}}},V=q,B=(a("1a73"),Object(m["a"])(V,s,r,!1,null,"4641765a",null));e["default"]=B.exports},5919:function(t,e,a){"use strict";a.d(e,"h",(function(){return l})),a.d(e,"c",(function(){return i})),a.d(e,"f",(function(){return c})),a.d(e,"g",(function(){return d})),a.d(e,"i",(function(){return u})),a.d(e,"a",(function(){return h})),a.d(e,"d",(function(){return m})),a.d(e,"j",(function(){return p})),a.d(e,"b",(function(){return f})),a.d(e,"e",(function(){return _}));var s=a("b775"),r=a("4328"),o=a.n(r),n=a("365c");function l(t){return Object(s["a"])({url:""+n["a"].domain.getDomain,method:"post",data:o.a.stringify(t)})}function i(t){return Object(s["a"])({url:""+n["a"].domain.defenseDomain,method:"post",data:o.a.stringify(t)})}function c(t){return Object(s["a"])({url:""+n["a"].domain.getCertification,method:"post",data:o.a.stringify(t)})}function d(){return Object(s["a"])({url:""+n["a"].domain.getCertification,method:"post"})}function u(t){return Object(s["a"])({url:""+n["a"].domain.setCertification,method:"post",data:o.a.stringify(t)})}function h(t){return Object(s["a"])({url:""+n["a"].domain.addCertification,method:"post",data:o.a.stringify(t)})}function m(t){return Object(s["a"])({url:""+n["a"].domain.delCertification,method:"post",data:o.a.stringify(t)})}function p(t){return Object(s["a"])({url:""+n["a"].domain.setDomain,method:"post",data:o.a.stringify(t)})}function f(t){return Object(s["a"])({url:""+n["a"].domain.addDomain,method:"post",data:o.a.stringify(t)})}function _(t){return Object(s["a"])({url:""+n["a"].domain.delDomain,method:"post",data:o.a.stringify(t)})}},"6ae5":function(t,e,a){"use strict";a.d(e,"i",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"g",(function(){return n})),a.d(e,"h",(function(){return l})),a.d(e,"j",(function(){return i})),a.d(e,"b",(function(){return d})),a.d(e,"c",(function(){return h})),a.d(e,"d",(function(){return m})),a.d(e,"e",(function(){return p})),a.d(e,"f",(function(){return u}));var s=a("5c96");const r={scheme:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],uri:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],remoteIp:["等于","列表","字典","IP段"],server_port:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],ip:["等于","列表","字典","IP段"],serverIp:["等于","列表","字典","IP段"],http_host:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],server_name:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],host:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],method:["等于","列表","字典","正则"],referer:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],headers:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],headers_data:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],useragent:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],cookie:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],request_uri:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],query_string:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],http_content_type:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],args:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],args_data:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],posts:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],posts_data:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],posts_all:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],post_form:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"]},o=["hostname","scheme","uri","remoteIp","server_port","ip","serverIp","http_host","server_name","host","method","referer","useragent","cookie","request_uri","query_string","http_content_type","headers","headers_data","args","args_data","posts","posts_data","posts_all","post_form"],n=["字典","IP段","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"];let l=new Object;l["等于"]={value:"=",des:"【字符串等于】 eg:'请输入字符串' * 表示匹配任意字符串"},l["包含"]={value:"in",des:"【字符串包含】 eg:'请输入字符串'"},l["正则"]={value:"jio",des:"【字符串正则 jio (ngx.re 参数修改使用 json 配置)】 eg:'请输入字符串'"},l["TOKEN"]={value:"@token@",des:"【服务端 token 验证】 eg:'请输入变量名称 ...'"},l["字典"]={value:"dict",des:"【等于对象中任一值】 eg:{'匹配':true,'字典中值为 true':true,'任意一个':true}"},l["IP段"]={value:"cidr",des:"【ip段 cidr 列表匹配】 eg:['匹配','cidr 列表中','任意一个']"},l["长度"]={value:"len",des:"【字符串长度匹配 min <= (*len) <= max 】 eg:['最小值','最大值']"},l["列表"]={value:"list",des:"【等于列表任一值】 eg:['匹配','数组中','任意一个']"},l["包含列表"]={value:"in_list",des:"【包含列表任一值】 eg:['包含匹配','列表中','任意一个']"},l["aho 包含列表"]={value:"aho",des:"【包含列表任一值（使用 aho 算法）】 eg:['包含匹配','列表中','任意一个']"},l["前缀列表"]={value:"start_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},l["前缀列表(不分大小写)"]={value:"ustart_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},l["后缀列表"]={value:"end_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"},l["后缀列表(不分大小写)"]={value:"uend_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"};let i=new Object;i["header"]={value:"headers",des:"【header 取值配置】\r\neg:['header头名称(横线使用下划线代替)','匹配位置'] \r\neg:['X_Scan_Memo','any (当有多个同名 header 头时 匹配任意位置)'] \r\neg:['X_Scan_Memo','end (默认值 当有多个同名 header 头时 匹配最后一个)']"},i["args"]={value:"args",des:"【args 取值配置】\r\neg:['GET url请求参数名称','匹配位置'] \r\neg:['args_a','any (当有多个同名参数时 匹配任意位置)'] \r\neg:['args_b','end (默认值 当有多个同名 GET 参数时 匹配最后一个)']"},i["posts"]={value:"posts",des:"【posts 取值配置】\r\neg:['POST body请求参数名称','匹配位置'] \r\neg:['username','any (当有多个同名参数时 匹配任意位置)'] \r\neg:['password','end (默认值 当有多个同名参数时 匹配最后一个)']"},i["post_form"]={value:"post_form",des:"【post 表单取值配置】\r\neg:['form表单name名称',匹配位置(取值范围：1-4)] \r\neg:['*（匹配所有表单name）',2 -- 匹配文件名] \r\neg:['*（匹配所有表单name）',3 匹配上传文件类型]\r\neg:['*（匹配所有表单name）',4 匹配上传文件内容（前 10240 内容【可配置】）]\r\neg:['*（匹配所有表单name）',1 匹配form表单name名称]"};const c=a("833b");function d(t){return Object.prototype.toString.call(t)}function u(t){var e;if(Object.keys(l).forEach((function(a){l[a]["value"]==t[1]&&(e=l[a],e["name"]=a)})),null!=e)return"长度"==e.name?(s["Message"].error("数组 需要是 Number"),!1):"字典"==e.name?(s["Message"].error("内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),!1):"IP段"==e.name?(s["Message"].error("数组值需要是合法的 CIDR eg: '192.168.1.1'"),!1):n.includes(e.name)?(s["Message"].error("内容 需要是 Array eg：['1','aaaa']"),!1):void s["Message"].error("内容 需要是 String eg：'aaaa'")}function h(t){var e;if(""==t[1]&&(t[1]="="),"restart_list"==t[1]&&(t[1]="ustart_list"),"reend_list"==t[1]&&(t[1]="uend_list"),"rein_list"==t[1]&&(t[1]="uin_list"),"[object Boolean]"!=d(t[2])&&(t[2]=!1),Object.keys(l).forEach((function(a){l[a]["value"]==t[1]&&(e=l[a],e["name"]=a)})),null!=e){if("长度"==e.name){if(2!=t[0].length)return console.log("checkmatch(objmatch) 数组长度需要为 2"),s["Message"].error("数组长度需要为 2"),!1;if("[object Number]"!=d(t[0][0])||"[object Number]"!=d(t[0][1]))return console.log("checkmatch(objmatch) 数组 需要是 Number"),s["Message"].error("数组 需要是 Number"),!1}else if("字典"==e.name){if("[object Object]"!=d(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),s["Message"].error("内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),!1;Object.keys(t[0]).forEach((function(e){if("[object Boolean]"!=d(t[0][e]))return console.log("checkmatch(objmatch) key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),s["Message"].error("key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),!1}))}else if("IP段"==e.name){if("[object Array]"!=d(t[0]))return!1;t[0]=Array.from(new Set(t[0])),console.log("objmatch[0] ",t[0]);for(var a=0;a<t[0].length;a++)if(!c.isValidAddress(t[0][a]))return console.log("checkmatch(objmatch) 数组值需要是合法的 CIDR eg: '192.168.1.1'"),s["Message"].error("数组值需要是合法的 CIDR eg: '192.168.1.1'"),!1}else if(n.includes(e.name)){if(console.log("列表111",d(t[0])),"[object Array]"!=d(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 Array eg：['1','aaaa']"),s["Message"].error("内容 需要是 Array eg：['1','aaaa']"),!1;t[0]=Array.from(new Set(t[0]))}else if("[object String]"!=d(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 String eg：'aaaa'"),s["Message"].error("内容 需要是 String eg：'aaaa'"),!1;return!0}var r=new RegExp("[^jiosadxDjuU]");return!r.test(t[1])&&(l["正则"]["value"]=t[1],!0)}function m(t){if(t.length>2)return console.log("匹配位置配置数组长度 <= 2 "),!1;if(null!=t[1]){let e=["any","end"];if(!e.includes(t[1])&&"[object Number]"!=d(t[1]))return console.log("位置错误 eg: any|end|null|%Number%"),!1}return!0}function p(t){return 2!=t.length?(console.log("匹配位置配置数组长度 == 2 eg:['*',2]"),!1):"[object Number]"!=d(t[1])?(console.log("位置错误 eg:1|2|3|4(Number)"),!1):!(t[1]>4||t[1]<1)||(console.log("位置错误 eg: 1<= N <= 4"),!1)}},"73eb":function(module,__webpack_exports__,__webpack_require__){"use strict";var _options_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("6ae5"),element_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5c96"),element_ui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_1__);const IPCIDR=__webpack_require__("833b");function TypeToString(t){return Object.prototype.toString.call(t)}function cloneObj(t){var e={};for(var a in t instanceof Array&&(e=[]),t){var s=t[a];e[a]="object"===typeof s?cloneObj(s):s}return e}function isInArray(t,e){if("[object Array]"==TypeToString(t)&&"[object Array]"==TypeToString(e)){for(var a=0;a<t.length;a++)for(var s=0;s<e.length;s++)if(t[a]==e[s])return!0;return!1}return!1}var match_str=["等于","包含","正则","TOKEN"],match_array=["字典","IP段","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],matchobj=new Object;matchobj["等于"]={value:"=",des:"【字符串等于】 eg:'请输入字符串' * 表示匹配任意字符串"},matchobj["包含"]={value:"in",des:"【字符串包含】 eg:'请输入字符串'"},matchobj["正则"]={value:"jio",des:"【字符串正则 jio (ngx.re 参数修改使用 json 配置)】 eg:'请输入字符串'"},matchobj["TOKEN"]={value:"@token@",des:"【服务端 token 验证】 eg:'请输入变量名称 ...'"},matchobj["字典"]={value:"dict",des:"【等于对象中任一值】 eg:{'匹配':true,'字典中值为 true':true,'任意一个':true}"},matchobj["IP段"]={value:"cidr",des:"【ip段 cidr 列表匹配】 eg:['匹配','cidr 列表中','任意一个']"},matchobj["长度"]={value:"len",des:"【字符串长度匹配 min <= (*len) <= max 】 eg:['最小值','最大值']"},matchobj["列表"]={value:"list",des:"【等于列表任一值】 eg:['匹配','数组中','任意一个']"},matchobj["包含列表"]={value:"in_list",des:"【包含列表任一值】 eg:['包含匹配','列表中','任意一个']"},matchobj["aho 包含列表"]={value:"aho",des:"【包含列表任一值（使用 aho 算法）】 eg:['包含匹配','列表中','任意一个']"},matchobj["前缀列表"]={value:"start_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},matchobj["前缀列表(不分大小写)"]={value:"ustart_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},matchobj["后缀列表"]={value:"end_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"},matchobj["后缀列表(不分大小写)"]={value:"uend_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"};var wzobj=new Object;function checkmatch(t){var e;if(""==t[1]&&(t[1]="="),"restart_list"==t[1]&&(t[1]="ustart_list"),"reend_list"==t[1]&&(t[1]="uend_list"),"rein_list"==t[1]&&(t[1]="uin_list"),"[object Boolean]"!=TypeToString(t[2])&&(t[2]=!1),Object.keys(matchobj).forEach((function(a){matchobj[a]["value"]==t[1]&&(e=matchobj[a],e["name"]=a)})),null!=e){if("长度"==e.name){if(2!=t[0].length)return console.log("长度 checkmatch(objmatch) 数组长度需要为 2"),element_ui__WEBPACK_IMPORTED_MODULE_1__["Message"].error("数组长度需要为 2"),!1;if("[object Number]"!=TypeToString(t[0][0])||"[object Number]"!=TypeToString(t[0][1]))return console.log("checkmatch(objmatch) 数组 需要是 Number"),element_ui__WEBPACK_IMPORTED_MODULE_1__["Message"].error("数组 需要是 Number"),!1}else if("字典"==e.name){if("[object Object]"!=TypeToString(t[0]))return console.log("字典 checkmatch(objmatch) 内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),element_ui__WEBPACK_IMPORTED_MODULE_1__["Message"].error("匹配内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),!1;Object.keys(t[0]).forEach((function(e){if("[object Boolean]"!=TypeToString(t[0][e]))return console.log("字典 checkmatch(objmatch) key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),element_ui__WEBPACK_IMPORTED_MODULE_1__["Message"].error("key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),!1}))}else if("IP段"==e.name){if("[object Array]"!=TypeToString(t[0]))return!1;t[0]=Array.from(new Set(t[0])),console.log("objmatch[0] ",t[0]);for(var a=0;a<t[0].length;a++)if(!IPCIDR.isValidAddress(t[0][a]))return console.log("IP段 checkmatch(objmatch) 数组值需要是合法的 CIDR eg: '192.168.1.1'"),element_ui__WEBPACK_IMPORTED_MODULE_1__["Message"].error("数组值需要是合法的 CIDR eg: '192.168.1.1'"),!1}else if(match_array.includes(e.name)){if("[object Array]"!=TypeToString(t[0]))return console.log("数组类 checkmatch(objmatch) 内容 需要是 Array eg：['1','aaaa']"),element_ui__WEBPACK_IMPORTED_MODULE_1__["Message"].error("匹配内容 需要是 Array eg：['1','aaaa']"),!1;t[0]=Array.from(new Set(t[0]))}else if("[object String]"!=TypeToString(t[0]))return console.log("字符串类 checkmatch(objmatch) 内容 需要是 String eg：'aaaa'"),element_ui__WEBPACK_IMPORTED_MODULE_1__["Message"].error("匹配内容 需要是 String eg：'aaaa'"),!1;return!0}var s=new RegExp("[^jiosadxDjuU]");return!s.test(t[1])&&(matchobj["正则"]["value"]=t[1],!0)}function checkwz(t){if(t.length>2)return console.log("匹配位置配置数组长度 <= 2 "),!1;if(null!=t[1]){let e=["any","end"];if(!e.includes(t[1])&&"[object Number]"!=TypeToString(t[1]))return console.log("位置错误 eg: any|end|null|%Number%"),!1}return!0}wzobj["header"]={value:"header",des:"【header 取值配置】\r\neg:['header头名称(横线使用下划线代替)','匹配位置'] \r\neg:['X_Scan_Memo','any (当有多个同名 header 头时 匹配任意位置)'] \r\neg:['X_Scan_Memo','end (默认值 当有多个同名 header 头时 匹配最后一个)']"};var GeneralList=["server_port","ip","hostname","uri","ips","method","referer","header","useragent","cookie","args","post"];__webpack_exports__["a"]={name:"match",props:{},computed:{computedOptions(){var t=new Object;return t["server_port"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["ip"]=["等于","列表","字典","IP段"],t["hostname"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["uri"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["ips"]=["等于","列表","字典","IP段"],t["method"]=["等于","列表","字典","正则"],t["referer"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["header"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["useragent"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["cookie"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["args"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["post"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t}},data(){return{dataLocalruleData:cloneObj(this.ruleData),dataTmpselectwz:"",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:"",dataRulewz:"",dataRuleArray:[],dataRuleView:"",flag:!1,outobj:{success:!1,emsg:"",data:""}}},created(){this.$attrs.data.forEach((t,e)=>{let a=[];this.$attrs.ruleData[t.dataTmpselectwz]&&(this.$attrs.ruleData[t.dataTmpselectwz][1]||(this.$attrs.ruleData[t.dataTmpselectwz][1]="="),"restart_list"==this.$attrs.ruleData[t.dataTmpselectwz][1]&&(this.$attrs.ruleData[t.dataTmpselectwz][1]="ustart_list"),"reend_list"==this.$attrs.ruleData[t.dataTmpselectwz][1]&&(this.$attrs.ruleData[t.dataTmpselectwz][1]="uend_list"),"rein_list"==this.$attrs.ruleData[t.dataTmpselectwz][1]&&(this.$attrs.ruleData[t.dataTmpselectwz][1]="uin_list")),this.computedRulewz(e)?("[object Boolean]"!=TypeToString(this.$attrs.ruleData[t.dataTmpselectwz][3])&&(this.$attrs.ruleData[t.dataTmpselectwz][3]=!1),a=[this.$attrs.ruleData[t.dataTmpselectwz][0],this.$attrs.ruleData[t.dataTmpselectwz][1],this.$attrs.ruleData[t.dataTmpselectwz][3]],t.dataRulewz=JSON.stringify(this.$attrs.ruleData[t.dataTmpselectwz][2])):a=this.$attrs.ruleData[t.dataTmpselectwz]||[];let s=a[1];var r;if(Object.keys(matchobj).forEach((function(t){matchobj[t]["value"]==s&&(r=matchobj[t],r["name"]=t)})),null!=r)t.dataTmpselectmatch=r.name;else{var o=new RegExp("[^jiosadxDjuU]");o.test(s)}"[object String]"!=TypeToString(a[0])?t.dataRuleValue=JSON.stringify(a[0]):t.dataRuleValue=a[0],t.dataIsNot=a[2]}),this.dataRuleView=JSON.stringify(this.$attrs.ruleData)},methods:{computedRulewz(t){let e=["header","args","posts","post_form"];return!!e.includes(this.$attrs.data[t].dataTmpselectwz)},computed_dataRulewz_place(t){var e=wzobj[t];return null!=e?e.des:"请输入"},computed_dataRuleValue_place(t){var e=matchobj[t];return null!=e?e.des:"请输入"},UphandleChange(){this.flag?(this.flag=!1,this.outobj.success=!1,this.$emit("UphandleChange",this.outobj)):(this.selectALl(),0==this.outobj.success&&(alert("规则配置错误 "+this.outobj.emsg),event.target.checked=!1),console.log("UphandleChange true",this.outobj),this.$emit("UphandleChange",this.outobj))},selectALl(t){this.$attrs.data.forEach((e,a)=>{this.$attrs.ruleData[e.dataTmpselectwz]||(this.$attrs.ruleData[e.dataTmpselectwz]=[]),null!=matchobj[this.$attrs.data[t].dataTmpselectmatch]&&t===a&&(this.$attrs.ruleData[e.dataTmpselectwz][1]=matchobj[this.$attrs.data[a].dataTmpselectmatch].value),this.$attrs.data[t].dataRuleValue&&t===a&&this.check_dataRuleValue(t,e.dataTmpselectwz),this.computedRulewz(t)?(t===a&&void 0!==this.$attrs.data[t].dataIsNot&&(this.$attrs.ruleData[e.dataTmpselectwz][3]=this.$attrs.data[t].dataIsNot),this.$attrs.data[t].dataRulewz&&t===a&&this.check_dataRulewz(t,e.dataTmpselectwz)):t===a&&void 0!==this.$attrs.data[t].dataIsNot&&(this.$attrs.ruleData[e.dataTmpselectwz][2]=this.$attrs.data[t].dataIsNot)}),1==this.outobj.success&&(this.outobj.data=this.dataLocalruleData.rule),this.dataRuleView=JSON.stringify(this.dataLocalruleData.rule)},selectNodewz(t){this.selectALl(),console.log("匹配位置:",this.dataTmpselectwz)},selectNodematch(t,e){this.selectALl(e),console.log("匹配方式:",t)},selectNodematchqf(t,e){this.selectALl(e),console.log("是否取反:",t)},print(t){},check_dataRuleValue(index,dataTmpselectwz){if(this.outobj.success=!1,match_array.includes(this.$attrs.data[index].dataTmpselectmatch))try{this.$attrs.ruleData[dataTmpselectwz][0]=eval("("+this.$attrs.data[index].dataRuleValue+")"),checkmatch(this.$attrs.ruleData[dataTmpselectwz])&&(this.outobj.success=!0,console.log("规则合法",this.$attrs.ruleData[dataTmpselectwz][0]))}catch(err){return this.outobj.success=!1,this.outobj.emsg="规则不合法合法 "+err,console.log("--- 规则不合法合法",err),Object(_options_js__WEBPACK_IMPORTED_MODULE_0__["f"])(this.$attrs.ruleData[dataTmpselectwz]),!1}else this.$attrs.ruleData[dataTmpselectwz][0]=this.$attrs.data[index].dataRuleValue;return this.outobj.success=!0,!0},change_dataRuleValue(t){this.selectALl(t)},check_dataRulewz(t,e){try{this.$attrs.data[t].dataRulewz=this.$attrs.data[t].dataRulewz.replace(/-/g,"_");var a=JSON.parse(this.$attrs.data[t].dataRulewz);if(!checkwz(a))return this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法",console.log("匹配位置配置 规则不合法"),!1;this.$attrs.ruleData[e][2]=a,console.log("匹配位置配置 规则合法")}catch(s){return this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法 "+s,console.log("匹配位置配置 规则不合法",s),!1}return!0},change_dataRulewz(t){this.selectALl(t)}}}},"85c8":function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return i}));var s=a("b775"),r=a("4328"),o=a.n(r),n=a("365c");function l(t){return Object(s["a"])({url:""+n["a"].cdn.cleanCache,method:"post",data:o.a.stringify(t)})}function i(t){return Object(s["a"])({url:""+n["a"].cdn.setPurge,method:"post",data:o.a.stringify(t)})}},"922e":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_options_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("6ae5"),element_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5c96"),element_ui__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_2__);const IPCIDR=__webpack_require__("833b");function TypeToString(t){return Object.prototype.toString.call(t)}function cloneObj(t){var e={};for(var a in t instanceof Array&&(e=[]),t){var s=t[a];e[a]="object"===typeof s?cloneObj(s):s}return e}function isInArray(t,e){if("[object Array]"==TypeToString(t)&&"[object Array]"==TypeToString(e)){for(var a=0;a<t.length;a++)for(var s=0;s<e.length;s++)if(t[a]==e[s])return!0;return!1}return!1}var match_str=["等于","包含","正则","TOKEN"],match_array=["字典","IP段","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],matchobj=new Object;matchobj["等于"]={value:"=",des:"【字符串等于】 eg:'请输入字符串' * 表示匹配任意字符串"},matchobj["包含"]={value:"in",des:"【字符串包含】 eg:'请输入字符串'"},matchobj["正则"]={value:"jio",des:"【字符串正则 jio (ngx.re 参数修改使用 json 配置)】 eg:'请输入字符串'"},matchobj["TOKEN"]={value:"@token@",des:"【服务端 token 验证】 eg:'请输入变量名称 ...'"},matchobj["字典"]={value:"dict",des:"【等于对象中任一值】 eg:{'匹配':true,'字典中值为 true':true,'任意一个':true}"},matchobj["IP段"]={value:"cidr",des:"【ip段 cidr 列表匹配】 eg:['匹配','cidr 列表中','任意一个']"},matchobj["长度"]={value:"len",des:"【字符串长度匹配 min <= (*len) <= max 】 eg:['最小值','最大值']"},matchobj["列表"]={value:"list",des:"【等于列表任一值】 eg:['匹配','数组中','任意一个']"},matchobj["包含列表"]={value:"in_list",des:"【包含列表任一值】 eg:['包含匹配','列表中','任意一个']"},matchobj["aho 包含列表"]={value:"aho",des:"【包含列表任一值（使用 aho 算法）】 eg:['包含匹配','列表中','任意一个']"},matchobj["前缀列表"]={value:"start_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},matchobj["前缀列表(不分大小写)"]={value:"ustart_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},matchobj["后缀列表"]={value:"end_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"},matchobj["后缀列表(不分大小写)"]={value:"uend_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"};var wzobj=new Object;function checkmatch(t){var e;if(""==t[1]&&(t[1]="="),"restart_list"==t[1]&&(t[1]="ustart_list"),"reend_list"==t[1]&&(t[1]="uend_list"),"rein_list"==t[1]&&(t[1]="uin_list"),"[object Boolean]"!=TypeToString(t[2])&&(t[2]=!1),Object.keys(matchobj).forEach((function(a){matchobj[a]["value"]==t[1]&&(e=matchobj[a],e["name"]=a)})),null!=e){if("长度"==e.name){if(2!=t[0].length)return console.log("checkmatch(objmatch) 数组长度需要为 2"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("数组长度需要为 2"),!1;if("[object Number]"!=TypeToString(t[0][0])||"[object Number]"!=TypeToString(t[0][1]))return console.log("checkmatch(objmatch) 数组 需要是 Number"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("数组 需要是 Number"),!1}else if("字典"==e.name){if("[object Object]"!=TypeToString(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("匹配内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),!1;Object.keys(t[0]).forEach((function(e){if("[object Boolean]"!=TypeToString(t[0][e]))return console.log("checkmatch(objmatch) key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),!1}))}else if("IP段"==e.name){if("[object Array]"!=TypeToString(t[0]))return!1;t[0]=Array.from(new Set(t[0])),console.log("objmatch[0] ",t[0]);for(var a=0;a<t[0].length;a++)if(!IPCIDR.isValidAddress(t[0][a]))return console.log("checkmatch(objmatch) 数组值需要是合法的 CIDR eg: '192.168.1.1'"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("数组值需要是合法的 CIDR eg: '192.168.1.1'"),!1}else if(match_array.includes(e.name)){if("[object Array]"!=TypeToString(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 Array eg：['1','aaaa']"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("匹配内容 需要是 Array eg：['1','aaaa']"),!1;t[0]=Array.from(new Set(t[0]))}else if("[object String]"!=TypeToString(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 String eg：'aaaa'"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("匹配内容 需要是 String eg：'aaaa'"),!1;return!0}var s=new RegExp("[^jiosadxDjuU]");return!s.test(t[1])&&(matchobj["正则"]["value"]=t[1],!0)}function checkwz(t){if(t.length>2)return console.log("匹配位置配置数组长度 <= 2 "),!1;if(null!=t[1]){let e=["any","end"];if(!e.includes(t[1])&&"[object Number]"!=TypeToString(t[1]))return console.log("位置错误 eg: any|end|null|%Number%"),!1}return!0}function checkwz_post_form(t){return 2!=t.length?(console.log("匹配位置配置数组长度 == 2 eg:['*',2]"),!1):"[object Number]"!=TypeToString(t[1])?(console.log("位置错误 eg:1|2|3|4(Number)"),!1):!(t[1]>4||t[1]<1)||(console.log("位置错误 eg: 1<= N <= 4"),!1)}wzobj["headers"]={value:"headers",des:"【header 取值配置】\r\neg:['header头名称(横线使用下划线代替)','匹配位置'] \r\neg:['X_Scan_Memo','any (当有多个同名 header 头时 匹配任意位置)'] \r\neg:['X_Scan_Memo','end (默认值 当有多个同名 header 头时 匹配最后一个)']"},wzobj["args"]={value:"args",des:"【args 取值配置】\r\neg:['GET url请求参数名称','匹配位置'] \r\neg:['args_a','any (当有多个同名参数时 匹配任意位置)'] \r\neg:['args_b','end (默认值 当有多个同名 GET 参数时 匹配最后一个)']"},wzobj["posts"]={value:"posts",des:"【posts 取值配置】\r\neg:['POST body请求参数名称','匹配位置'] \r\neg:['username','any (当有多个同名参数时 匹配任意位置)'] \r\neg:['password','end (默认值 当有多个同名参数时 匹配最后一个)']"},wzobj["post_form"]={value:"post_form",des:"【post 表单取值配置】\r\neg:['form表单name名称',匹配位置(取值范围：1-4)] \r\neg:['*（匹配所有表单name）',2 -- 匹配文件名] \r\neg:['*（匹配所有表单name）',3 匹配上传文件类型]\r\neg:['*（匹配所有表单name）',4 匹配上传文件内容（前 10240 内容【可配置】）]\r\neg:['*（匹配所有表单name）',1 匹配form表单name名称]"};var GeneralList=["scheme","uri","remoteIp","ip","serverIp","http_host","server_name","host","method","referer","useragent","cookie","request_uri","query_string","http_content_type","headers","headers_data","args","args_data","posts","posts_data","posts_all","post_form"];__webpack_exports__["a"]={name:"match",props:{ruleData:{type:Object,required:!1,default:function(){return{nameMatch:[],rule:["referer",["https://www.baidu.com\\.*","jo"],"and"]}}}},computed:{computedNameMatch(){let t=[];if(0==this.ruleData.nameMatch.length)return t=[].concat(GeneralList),t;for(var e=this.ruleData.nameMatch.length-1;e>=0;e--)GeneralList.includes(this.ruleData.nameMatch[e])&&t.push(this.ruleData.nameMatch[e]);return 0==t.length?(t=[].concat(GeneralList),console.log("NameMatchList is ",t),t):t},computedOptions(){var t=new Object;return t["scheme"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["uri"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["remoteIp"]=["等于","列表","字典","IP段"],t["ip"]=["等于","列表","字典","IP段"],t["serverIp"]=["等于","列表","字典","IP段"],t["http_host"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["server_name"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["host"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["method"]=["等于","列表","字典","正则"],t["referer"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["headers"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["headers_data"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["useragent"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["cookie"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["args"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)","TOKEN"],t["args_data"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["posts"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["posts_data"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["posts_all"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["post_form"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t}},data(){return{dataLocalruleData:this.ruleData,dataTmpselectwz:"",dataTmpselectmatch:"",dataIsNot:!1,dataOperator:"and",dataRuleValue:"",dataRulewz:"",dataRuleArray:[],dataRuleView:"",flag:!1,outobj:{success:!1,emsg:"",data:""}}},created(){0==this.$attrs.ruleList.length?(this.dataTmpselectwz=this.computedNameMatch[0],this.dataTmpselectmatch=this.computedOptions[this.dataTmpselectwz][0],this.dataLocalruleData.rule[0]=this.dataTmpselectwz,this.dataLocalruleData.rule[1]=[""],null!=matchobj[this.dataTmpselectmatch]?this.dataLocalruleData.rule[1][1]=matchobj[this.dataTmpselectmatch].value:this.dataLocalruleData.rule[1][1]="=",this.computedRulewz?(this.dataLocalruleData.rule[1][2]=[],this.dataLocalruleData.rule[1][3]=this.dataIsNot,this.dataRuleArray=[this.dataLocalruleData.rule[1][0],this.dataLocalruleData.rule[1][2],this.dataLocalruleData.rule[1][3]]):(this.dataLocalruleData.rule[1][2]=this.dataIsNot,this.dataRuleArray=this.dataLocalruleData.rule[1]),this.dataLocalruleData.rule[2]=this.dataOperator):this.$attrs.ruleList.forEach((t,e)=>{let a=[];this.$attrs.data[e]||this.$set(this.$attrs.data,e,{dataTmpselectwz:"",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}),this.$attrs.ruleList[e][1][1]||(this.$attrs.ruleList[e][1][1]="="),"restart_list"==this.$attrs.ruleList[e][1][1]&&(this.$attrs.ruleList[e][1][1]="ustart_list"),"reend_list"==this.$attrs.ruleList[e][1][1]&&(this.$attrs.ruleList[e][1][1]="uend_list"),"rein_list"==this.$attrs.ruleList[e][1][1]&&(this.$attrs.ruleList[e][1][1]="uin_list"),this.$attrs.data[e].dataTmpselectwz=t[0],this.computedRulewz(e)?("[object Boolean]"!=TypeToString(this.$attrs.ruleList[e][1][3])&&(this.$attrs.ruleList[e][1][3]=!1),a=[this.$attrs.ruleList[e][1][0],this.$attrs.ruleList[e][1][1],this.$attrs.ruleList[e][1][3]],this.$attrs.data[e].dataRulewz=JSON.stringify(this.$attrs.ruleList[e][1][2])):("[object Boolean]"!=TypeToString(this.$attrs.ruleList[e][1][2])&&(this.$attrs.ruleList[e][1][2]=!1),a=this.$attrs.ruleList[e][1]),checkmatch(a);let s=a[1];var r;if(Object.keys(matchobj).forEach((function(t){matchobj[t]["value"]==s&&(r=matchobj[t],r["name"]=t)})),null!=r)this.$attrs.data[e].dataTmpselectmatch=r.name;else{var o=new RegExp("[^jiosadxDjuU]");o.test(s)||(this.$attrs.data[e].dataTmpselectmatch="正则")}"[object String]"!=TypeToString(a[0])?this.$attrs.data[e].dataRuleValue=JSON.stringify(this.$attrs.ruleList[e][1][0]):this.$attrs.data[e].dataRuleValue=this.$attrs.ruleList[e][1][0],this.$attrs.data[e].dataIsNot=a[2],this.$attrs.data[e].dataOperator=this.$attrs.ruleList[e][2]}),this.dataRuleView=JSON.stringify(this.$attrs.ruleList)},methods:{showSelect(t){return["IP段","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"].includes(t)},computed_dataRuleValue_place(t){var e=matchobj[t];return null!=e?e.des:"请输入"},computed_dataRulewz_place(t){var e=wzobj[t];return null!=e?e.des:"请输入"},computedRulewz(t){let e=["headers","args","posts","post_form"];return!!e.includes(this.$attrs.data[t].dataTmpselectwz)},handleRemove(t){this.$attrs.data.splice(t,1),this.$attrs.ruleList.splice(t,1)},handleAdd(){this.$attrs.data.push({dataIsNot:"false",dataRuleValue:""})},UphandleChange(){this.flag?(this.flag=!1,this.outobj.success=!1,this.$emit("UphandleChange:",this.outobj)):(this.selectALl(),0==this.outobj.success&&(alert("规则配置错误 "+this.outobj.emsg),event.target.checked=!1),console.log("UphandleChange true",this.outobj),this.$emit("UphandleChange:",this.outobj))},selectALl(t){const e=["",[]];var a,s;(this.$set(this.$attrs.ruleList,t,e),this.$attrs.ruleList[t][0]=this.$attrs.data[t].dataTmpselectwz,matchobj[this.$attrs.data[t].dataTmpselectmatch]&&(this.$attrs.ruleList[t][1][1]=matchobj[this.$attrs.data[t].dataTmpselectmatch].value),this.$attrs.data[t].dataRuleValue&&this.check_dataRuleValue(t),this.computedRulewz(t))?(this.$attrs.ruleList[t][1][1]=null===(a=matchobj[this.$attrs.data[t].dataTmpselectmatch])||void 0===a?void 0:a.value,void 0!==this.$attrs.data[t].dataIsNot&&(this.$attrs.ruleList[t][1][3]=this.$attrs.data[t].dataIsNot),this.$attrs.data[t].dataRulewz&&this.check_dataRulewz(t)):(void 0!==this.$attrs.data[t].dataIsNot&&(this.$attrs.ruleList[t][1][2]=this.$attrs.data[t].dataIsNot),this.$attrs.ruleList[t][1][1]=null===(s=matchobj[this.$attrs.data[t].dataTmpselectmatch])||void 0===s?void 0:s.value);this.$attrs.ruleList[t][2]=this.$attrs.data[t].dataOperator,1==this.outobj.success&&(this.outobj.data=this.$attrs.ruleList),this.dataRuleView=this.$attrs.ruleList,this.outobj.succes&&this.$emit("changeRule",this.dataRuleView)},selectNodewz(t,e){this.$attrs.data[e].dataTmpselectmatch="",this.selectALl(e),console.log("匹配位置:",t)},selectNodematch(t,e){this.$attrs.data[e].dataRuleValue="",this.selectALl(e),console.log("匹配方式:",t)},selectNodematchqf(t,e){this.selectALl(e),console.log("是否取反:",t)},print(t){},selectNodeOperator(t,e){this.selectALl(e),console.log("规则连接运算符:",t)},check_dataRuleValue(index){if(this.outobj.success=!1,console.log(this.$attrs.data[index].dataTmpselectmatch),match_array.includes(this.$attrs.data[index].dataTmpselectmatch))try{this.$attrs.ruleList[index][1][0]=eval("("+this.$attrs.data[index].dataRuleValue+")"),checkmatch(this.$attrs.ruleList[index][1])?(this.outobj.success=!0,console.log("dataRuleValue 规则合法",this.$attrs.ruleList[index][1][0])):this.$attrs.data[index].dataRuleValue=""}catch(err){return this.outobj.success=!1,this.outobj.emsg=err,console.log("dataRuleValue 规则不合法",err),Object(_options_js__WEBPACK_IMPORTED_MODULE_1__["f"])(this.$attrs.ruleList[index][1]),!1}else console.log(222),this.$attrs.ruleList[index][1][0]=this.$attrs.data[index].dataRuleValue;return this.outobj.success=!0,!0},change_dataRuleValue(t){this.selectALl(t)},check_dataRulewz(t){try{if("headers"==this.$attrs.data[t].dataTmpselectwz){this.$attrs.data[t].dataRulewz=this.$attrs.data[t].dataRulewz.replace(/-/g,"_");let e=JSON.parse(this.$attrs.data[t].dataRulewz);if(this.$attrs.ruleList[t][1][2]=e,!checkwz(e))return this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法",console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则不合法"),!1;console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则合法")}else{if("post_form"==this.$attrs.data[t].dataTmpselectwz){let e=JSON.parse(this.$attrs.data[t].dataRulewz);return this.$attrs.ruleList[t][1][2]=this.$attrs.data[t].dataRulewz,checkwz_post_form(e)?(console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则合法"),!0):(console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则不合法"),this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法",!1)}{let e=JSON.parse(this.$attrs.data[t].dataRulewz);if(this.$attrs.ruleList[t][1][2]=e,!checkwz(e))return console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则不合法"),this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法",!1;console.log(this.dataTmpselectwz,"匹配位置配置 规则合法")}}}catch(e){return console.log("匹配位置配置 规则不合法",e),this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法 "+e,!1}return!0},change_dataRulewz(t){this.selectALl(t)}}}},9448:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return d}));var s=a("b775"),r=a("4328"),o=a.n(r),n=a("365c");function l(t){return Object(s["a"])({url:""+n["a"].plugin.getPlugin,method:"post",data:o.a.stringify(t)})}function i(t){return Object(s["a"])({url:""+n["a"].plugin.setPlugin,method:"post",data:o.a.stringify(t)})}function c(t){return Object(s["a"])({url:""+n["a"].plugin.addPlugin,method:"post",data:o.a.stringify(t)})}function d(t){return Object(s["a"])({url:""+n["a"].plugin.delPlugin,method:"post",data:o.a.stringify(t)})}},a80b:function(t,e,a){},b1ef:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var s=a("b775"),r=a("4328"),o=a.n(r),n=a("365c");function l(t){return Object(s["a"])({url:""+n["a"].global.ipSet,method:"post",data:o.a.stringify(t)})}},e13e:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-table",t._b({attrs:{border:"","header-row-style":{"line-height":"23px"}}},"el-table",t.$attrs,!1),[e("el-table-column",{attrs:{label:"匹配位置",align:"center",prop:"malocation"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",disabled:t.flag,placeholder:"请选择"},on:{change:function(e){return t.selectNodewz(a.dataTmpselectwz,s)}},model:{value:a.dataTmpselectwz,callback:function(e){t.$set(a,"dataTmpselectwz","string"===typeof e?e.trim():e)},expression:"row.dataTmpselectwz"}},t._l(t.computedNameMatch,(function(t,a){return e("el-option",{key:a,attrs:{value:t,label:t}})})),1)]}}])}),e("el-table-column",{attrs:{label:"匹配方式",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",disabled:t.flag,placeholder:"请选择"},on:{change:function(e){return t.selectNodematch(a.dataTmpselectmatch,s)}},model:{value:a.dataTmpselectmatch,callback:function(e){t.$set(a,"dataTmpselectmatch","string"===typeof e?e.trim():e)},expression:"row.dataTmpselectmatch"}},t._l(t.computedOptions[a.dataTmpselectwz],(function(a,s){return e("el-option",{key:s,attrs:{value:a,label:a}},[t._v(" "+t._s(a)+" ")])})),1)]}}])}),e("el-table-column",{attrs:{label:"取反标识",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",disabled:t.flag,placeholder:"请选择"},on:{change:function(e){return t.selectNodematchqf(a.dataIsNot,s)}},model:{value:a.dataIsNot,callback:function(e){t.$set(a,"dataIsNot",e)},expression:"row.dataIsNot"}},t._l([!1,!0],(function(t,a){return e("el-option",{key:a,attrs:{value:t,label:t+""}})})),1)]}}])}),e("el-table-column",{attrs:{label:"匹配内容",align:"center",width:"400"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-input",{attrs:{size:"small",placeholder:t.computed_dataRuleValue_place(a.dataTmpselectmatch),name:"name",title:t.computed_dataRuleValue_place(a.dataTmpselectmatch),disabled:t.flag},on:{blur:function(e){return e.preventDefault(),t.change_dataRuleValue(s)}},model:{value:a.dataRuleValue,callback:function(e){t.$set(a,"dataRuleValue","string"===typeof e?e.trim():e)},expression:"row.dataRuleValue"}}),e("el-row",{directives:[{name:"show",rawName:"v-show",value:t.computedRulewz(s),expression:"computedRulewz($index)"}]},[e("el-input",{staticStyle:{width:"65%"},attrs:{size:"small",placeholder:t.computed_dataRulewz_place(a.dataTmpselectwz),name:"name",title:t.computed_dataRulewz_place(a.dataTmpselectwz),disabled:t.flag},on:{blur:function(e){return e.preventDefault(),t.change_dataRulewz(s)}},model:{value:a.dataRulewz,callback:function(e){t.$set(a,"dataRulewz","string"===typeof e?e.trim():e)},expression:"row.dataRulewz"}}),t._v(" * 匹配位置取值配置 ")],1)]}}])}),e("el-table-column",{attrs:{label:"连接运算符",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",placeholder:"请选择",disabled:t.flag},on:{change:function(e){return t.selectNodeOperator(a.dataOperator,s)}},model:{value:a.dataOperator,callback:function(e){t.$set(a,"dataOperator","string"===typeof e?e.trim():e)},expression:"row.dataOperator"}},t._l(["and","or"],(function(t,a){return e("el-option",{key:a,attrs:{value:t,label:t}})})),1)]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function({$index:a}){return[e("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:t.handleAdd}}),t.$attrs.data.length>1?e("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text",icon:"el-icon-remove-outline"},on:{click:function(e){return t.handleRemove(a)}}}):t._e()]}}])}),e("td",[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.flag,expression:"flag",modifiers:{trim:!0}}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.flag)?t._i(t.flag,null)>-1:t.flag},on:{click:t.UphandleChange,change:function(e){var a=t.flag,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=t._i(a,o);s.checked?n<0&&(t.flag=a.concat([o])):n>-1&&(t.flag=a.slice(0,n).concat(a.slice(n+1)))}else t.flag=r}}})])],1)},r=[],o=a("922e"),n=o["a"],l=a("2877"),i=Object(l["a"])(n,s,r,!1,null,"18074d40",null);e["a"]=i.exports}}]);