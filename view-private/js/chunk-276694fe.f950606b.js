(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-276694fe"],{"39b7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("el-card",{attrs:{shadow:"never"}},[e("el-row",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{gutter:10}},[e("div",{staticStyle:{width:"300px",float:"left"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("div",{staticClass:"el-icon-info",staticStyle:{"margin-left":"100px",float:"left"}},[e("span",{staticStyle:{color:"red"}},[t._v("注：")]),t._v("Log规则有使用插件函数、且插件有变化，需要重启整个集群，使其生效")]),e("div",{staticStyle:{float:"right"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleAdd}},[t._v("添加")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSave}},[t._v("保存")])],1)]),e("el-row",{staticStyle:{margin:"20px"}},[e("el-col",{attrs:{span:12}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("log节点配置:")]),e("el-radio-group",{on:{change:t.setbaseState},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("el-radio",{attrs:{label:"on"}}),e("el-radio",{attrs:{label:"off"}})],1)],1),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{float:"right"}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("当前数量："+t._s(t.pageTotal))]),e("span",{staticStyle:{color:"blue"}},[t._v("版本号：")]),t._v(t._s(t.version)+" ")])])],1),e("el-table",{attrs:{data:t.userList,border:""}},[e("el-table-column",{attrs:{label:"ID",align:"center",prop:"id",width:"80","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"内容",align:"left",prop:"contents","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"340","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleSet(a.row)}}},[t._v("修改")]),e("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-top"},on:{click:function(e){return t.up(a.$index)}}},[t._v("上移")]),e("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-bottom"},on:{click:function(e){return t.down(a.$index)}}},[t._v("下移")]),e("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-arrow-up"},on:{click:function(e){return t.upIndex(a.$index)}}},[t._v("置顶")]),e("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-arrow-down"},on:{click:function(e){return t.downIndex(a.$index)}}},[t._v("置底")]),e("el-popover",{attrs:{placement:"top",width:"160"},model:{value:a.row.visible,callback:function(e){t.$set(a.row,"visible",e)},expression:"scope.row.visible"}},[e("p",[t._v("确定要删除吗?")]),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){a.row.visible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleDel(a.row)}}},[t._v("确定")])],1),e("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),e("el-row",[e("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleApply}},[t._v("应用")])],1)]),e("el-drawer",{attrs:{title:t.title,visible:t.open,size:"60%"},on:{"update:visible":function(e){t.open=e}}},[e("div",{staticStyle:{padding:"20px"}},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"图形化配置",name:"second"}},[e("el-form",{attrs:{"label-width":"100px",model:t.form.contents}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则ID："}},[e("el-input",{attrs:{placeholder:"输入ID信息",clearable:""},model:{value:t.form.contents.id,callback:function(e){t.$set(t.form.contents,"id",e)},expression:"form.contents.id"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"规则描述："}},[e("el-input",{attrs:{placeholder:"输入描述信息",clearable:""},model:{value:t.form.contents.des,callback:function(e){t.$set(t.form.contents,"des",e)},expression:"form.contents.des"}})],1)],1)],1),e("el-form-item",{attrs:{label:"是否启用："}},[e("el-switch",{attrs:{"active-value":"on","inactive-value":"off"},model:{value:t.form.contents.state,callback:function(e){t.$set(t.form.contents,"state",e)},expression:"form.contents.state"}})],1),e("el-form-item",{attrs:{"label-width":"''"}},[t.open?e("GjComponent",{attrs:{data:t.appExtData,ruleList:t.form.contents.app_ext},on:{changeRule:t.changeRule}}):t._e()],1),e("el-form-item",{attrs:{label:"函数名称："}},[e("el-select",{attrs:{placeholder:"请选择函数名称"},model:{value:t.form.contents.func[0],callback:function(e){t.$set(t.form.contents.func,0,e)},expression:"form.contents.func[0]"}},t._l(t.funcList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"函数参数："}},[t.open?e("vue-json-editor",{staticClass:"editorR",attrs:{mode:"code",lang:"zh"},model:{value:t.form.contents.func[1],callback:function(e){t.$set(t.form.contents.func,1,e)},expression:"form.contents.func[1]"}}):t._e()],1)],1)],1),e("el-tab-pane",{attrs:{label:"原始JSON配置",name:"first"}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},["first"===t.activeName?e("vue-json-editor",{staticClass:"editorR",attrs:{mode:"code",lang:"zh"},model:{value:t.form.contents,callback:function(e){t.$set(t.form,"contents",e)},expression:"form.contents"}}):t._e()],1),e("el-col",{attrs:{span:12}},["first"===t.activeName?e("codemirror",{staticClass:"editorR",attrs:{options:t.options},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}):t._e(),e("br"),e("el-link",{attrs:{href:"https://www.kancloud.cn/openstar/install/1136671",target:"_blank"}},[t._v("详情请点击此处，参考文档")])],1)],1)],1)],1),e("div",{staticClass:"dialog-footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),e("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)])],1)],1)},r=[],o=(a("14d9"),a("9448")),n=a("e13e"),l=a("8f94"),i=(a("a7be"),a("acdf"),a("7ba3"),a("a8d9"),a("db91"),a("b2b9"),a("f9d4"),a("45a3")),c=a("a417");const u=a("e762").Base64;var d={components:{vueJsonEditor:i["a"],codemirror:l["codemirror"],GjComponent:n["a"]},data(){return{code:'\n\n\n{\n  "state": "规则开关",\n  "des":"规则描述 [1-logFunc]",\n  "app_ext":[\n      ["ip",[["106.37.236.170","1.1.1.1"],"list",true],"and"],\n      ["host",["localhost","",false],"and"],\n      [ "匹配位置",\n        ["匹配内容","匹配方式","是否取反"],\n        "连接符: and(默认)/or"\n        ]\n    ]\n  "func": ["函数名称",{...函数参数}]\n}\n\n\n',options:{tabSize:4,mode:{name:"javascript",json:!0},theme:"darcula",lineNumbers:!0,line:!0,lineWrapping:!0,styleSelectedText:!0,styleActiveLine:!0,hintOptions:{completeSingle:!0}},userList:[],tempList:[],pageTotal:0,state:"",version:"",search:"",open:!1,title:"",form:{id:0,contents:{state:"on",app_ext:[],func:[]}},activeName:"second",funcList:[],appExtData:[{dataTmpselectwz:"",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}]}},created(){this.getList(),this.getFuncList()},methods:{changeRule(t){console.log(t,"changeRule"),this.form.contents.app_ext=t},getFuncList(){var t={id:"all_Mod"};Object(o["c"])(t).then(t=>{var e=t.msg,a=[];for(var s in e)if("count"!=s){var r=e[s],o={};o.name=s,o.file=r.file,o.disk_file=r.disk_file,o.description=r.description,o.contents=r.contents,a.push(o)}this.funcList=a})},isJSON(t){if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!=typeof e||!e)}catch(a){return!1}else if("object"==typeof t&&t)return!0},up(t){0!==t&&this.swapItems(this.userList,t,t-1)},upIndex(t){0!==t&&this.swapItems(this.userList,t,0,"up")},down(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,t+1)},downIndex(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,0,"down")},swapItems(t,e,a,s){return"up"==s?(t.unshift(t[e]),t.splice(e+1,1),t):"down"==s?(t.push(t[e]),t.splice(e,1),t):(t[e]=t.splice(a,1,t[e])[0],t)},getList(){var t={action:"get",mod:"log_Mod"};Object(c["b"])(t).then(t=>{var e=t.msg,a=[];e=t.msg;for(var s in e)if("count"!=s&&"G_version"!=s&&"state"!=s){var r={};r.id=s,r.contents=JSON.stringify(e[s]),a.push(r)}this.version=t.msg.G_version,this.state=t.msg.state,this.userList=a,this.tempList=a,this.pageTotal=a.length})},setbaseState(){var t={G_version:this.version,state:this.state},e={action:"set",mod:"base",id:"log_Mod",value:JSON.stringify(t)};Object(c["b"])(e).then(t=>{"ok"===t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})},reset(){this.form=this.$options.data().form,this.appExtData=this.$options.data().appExtData},cancel(){this.open=!1,this.reset()},handleAdd(){this.reset(),this.title="添加",this.open=!0},handleSet(t){this.reset(),this.title="修改";var e={};e.id=t.id,e.contents=JSON.parse(t.contents),this.form=e,this.open=!0},handleDel(t){var e={action:"del",mod:"log_Mod",id:t.id};Object(c["b"])(e).then(t=>{"ok"===t.code?(this.$notify({title:"成功",message:t.msg,type:"success"}),this.open=!1,this.getList()):this.$notify({title:"警告",message:t.msg,type:"warning"})})},submitForm(){if(!this.isJSON(this.form.contents))return this.$message.error("配置内容:json格式错误/没有内容"),!1;if("修改"===this.title){var t={action:"set",mod:"log_Mod",id:this.form.id,value:JSON.stringify(this.form.contents)};Object(c["b"])(t).then(t=>{"ok"===t.code?(this.$notify({title:"成功",message:t.msg,type:"success"}),this.open=!1,this.getList(1)):this.$notify({title:"警告",message:t.msg,type:"warning"})})}else{t={action:"add",mod:"log_Mod",value:JSON.stringify(this.form.contents)};Object(c["b"])(t).then(t=>{"ok"===t.code?(this.$notify({title:"成功",message:t.msg,type:"success"}),this.open=!1,this.getList(1)):this.$notify({title:"警告",message:t.msg,type:"warning"})})}},handleSave(){var t={action:"save",mod:"all_Mod"};Object(c["h"])(t).then(t=>{"ok"==t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})},handleApply(){var t=this.userList.map(t=>JSON.parse(t.contents)),e={action:"set",mod:"log_Mod",value:JSON.stringify(t)};Object(c["b"])(e).then(t=>{"ok"==t.code?this.$notify({title:"成功",message:t.msg,type:"success"}):this.$notify({title:"警告",message:t.msg,type:"warning"})})}},filters:{match:function(t){return u.decode(t)}},watch:{$route(t,e){},search:{handler:function(t,e){this.userList=""===t?this.tempList:this.tempList.filter((function(e){if(e.contents.indexOf(t)>=0)return!0}))}}}},h=d,m=(a("3aa6"),a("2877")),p=Object(m["a"])(h,s,r,!1,null,"c11d4608",null);e["default"]=p.exports},"3aa6":function(t,e,a){"use strict";a("ff25")},"6ae5":function(t,e,a){"use strict";a.d(e,"i",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"g",(function(){return n})),a.d(e,"h",(function(){return l})),a.d(e,"j",(function(){return i})),a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return h})),a.d(e,"d",(function(){return m})),a.d(e,"e",(function(){return p})),a.d(e,"f",(function(){return d}));var s=a("5c96");const r={scheme:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],uri:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],remoteIp:["等于","列表","字典","IP段"],server_port:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],ip:["等于","列表","字典","IP段"],serverIp:["等于","列表","字典","IP段"],http_host:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],server_name:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],host:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],hostname:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],method:["等于","列表","字典","正则"],referer:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],headers:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],headers_data:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],useragent:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],cookie:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],request_uri:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],query_string:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],http_content_type:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],args:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],args_data:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],posts:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],posts_data:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],posts_all:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],post_form:["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"]},o=["hostname","scheme","uri","remoteIp","server_port","ip","serverIp","http_host","server_name","host","method","referer","useragent","cookie","request_uri","query_string","http_content_type","headers","headers_data","args","args_data","posts","posts_data","posts_all","post_form"],n=["字典","IP段","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"];let l=new Object;l["等于"]={value:"=",des:"【字符串等于】 eg:'请输入字符串' * 表示匹配任意字符串"},l["包含"]={value:"in",des:"【字符串包含】 eg:'请输入字符串'"},l["正则"]={value:"jio",des:"【字符串正则 jio (ngx.re 参数修改使用 json 配置)】 eg:'请输入字符串'"},l["TOKEN"]={value:"@token@",des:"【服务端 token 验证】 eg:'请输入变量名称 ...'"},l["字典"]={value:"dict",des:"【等于对象中任一值】 eg:{'匹配':true,'字典中值为 true':true,'任意一个':true}"},l["IP段"]={value:"cidr",des:"【ip段 cidr 列表匹配】 eg:['匹配','cidr 列表中','任意一个']"},l["长度"]={value:"len",des:"【字符串长度匹配 min <= (*len) <= max 】 eg:['最小值','最大值']"},l["列表"]={value:"list",des:"【等于列表任一值】 eg:['匹配','数组中','任意一个']"},l["包含列表"]={value:"in_list",des:"【包含列表任一值】 eg:['包含匹配','列表中','任意一个']"},l["aho 包含列表"]={value:"aho",des:"【包含列表任一值（使用 aho 算法）】 eg:['包含匹配','列表中','任意一个']"},l["前缀列表"]={value:"start_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},l["前缀列表(不分大小写)"]={value:"ustart_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},l["后缀列表"]={value:"end_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"},l["后缀列表(不分大小写)"]={value:"uend_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"};let i=new Object;i["header"]={value:"headers",des:"【header 取值配置】\r\neg:['header头名称(横线使用下划线代替)','匹配位置'] \r\neg:['X_Scan_Memo','any (当有多个同名 header 头时 匹配任意位置)'] \r\neg:['X_Scan_Memo','end (默认值 当有多个同名 header 头时 匹配最后一个)']"},i["args"]={value:"args",des:"【args 取值配置】\r\neg:['GET url请求参数名称','匹配位置'] \r\neg:['args_a','any (当有多个同名参数时 匹配任意位置)'] \r\neg:['args_b','end (默认值 当有多个同名 GET 参数时 匹配最后一个)']"},i["posts"]={value:"posts",des:"【posts 取值配置】\r\neg:['POST body请求参数名称','匹配位置'] \r\neg:['username','any (当有多个同名参数时 匹配任意位置)'] \r\neg:['password','end (默认值 当有多个同名参数时 匹配最后一个)']"},i["post_form"]={value:"post_form",des:"【post 表单取值配置】\r\neg:['form表单name名称',匹配位置(取值范围：1-4)] \r\neg:['*（匹配所有表单name）',2 -- 匹配文件名] \r\neg:['*（匹配所有表单name）',3 匹配上传文件类型]\r\neg:['*（匹配所有表单name）',4 匹配上传文件内容（前 10240 内容【可配置】）]\r\neg:['*（匹配所有表单name）',1 匹配form表单name名称]"};const c=a("833b");function u(t){return Object.prototype.toString.call(t)}function d(t){var e;if(Object.keys(l).forEach((function(a){l[a]["value"]==t[1]&&(e=l[a],e["name"]=a)})),null!=e)return"长度"==e.name?(s["Message"].error("数组 需要是 Number"),!1):"字典"==e.name?(s["Message"].error("内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),!1):"IP段"==e.name?(s["Message"].error("数组值需要是合法的 CIDR eg: '192.168.1.1'"),!1):n.includes(e.name)?(s["Message"].error("内容 需要是 Array eg：['1','aaaa']"),!1):void s["Message"].error("内容 需要是 String eg：'aaaa'")}function h(t){var e;if(""==t[1]&&(t[1]="="),"restart_list"==t[1]&&(t[1]="ustart_list"),"reend_list"==t[1]&&(t[1]="uend_list"),"rein_list"==t[1]&&(t[1]="uin_list"),"[object Boolean]"!=u(t[2])&&(t[2]=!1),Object.keys(l).forEach((function(a){l[a]["value"]==t[1]&&(e=l[a],e["name"]=a)})),null!=e){if("长度"==e.name){if(2!=t[0].length)return console.log("checkmatch(objmatch) 数组长度需要为 2"),s["Message"].error("数组长度需要为 2"),!1;if("[object Number]"!=u(t[0][0])||"[object Number]"!=u(t[0][1]))return console.log("checkmatch(objmatch) 数组 需要是 Number"),s["Message"].error("数组 需要是 Number"),!1}else if("字典"==e.name){if("[object Object]"!=u(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),s["Message"].error("内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),!1;Object.keys(t[0]).forEach((function(e){if("[object Boolean]"!=u(t[0][e]))return console.log("checkmatch(objmatch) key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),s["Message"].error("key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),!1}))}else if("IP段"==e.name){if("[object Array]"!=u(t[0]))return!1;t[0]=Array.from(new Set(t[0])),console.log("objmatch[0] ",t[0]);for(var a=0;a<t[0].length;a++)if(!c.isValidAddress(t[0][a]))return console.log("checkmatch(objmatch) 数组值需要是合法的 CIDR eg: '192.168.1.1'"),s["Message"].error("数组值需要是合法的 CIDR eg: '192.168.1.1'"),!1}else if(n.includes(e.name)){if(console.log("列表111",u(t[0])),"[object Array]"!=u(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 Array eg：['1','aaaa']"),s["Message"].error("内容 需要是 Array eg：['1','aaaa']"),!1;t[0]=Array.from(new Set(t[0]))}else if("[object String]"!=u(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 String eg：'aaaa'"),s["Message"].error("内容 需要是 String eg：'aaaa'"),!1;return!0}var r=new RegExp("[^jiosadxDjuU]");return!r.test(t[1])&&(l["正则"]["value"]=t[1],!0)}function m(t){if(t.length>2)return console.log("匹配位置配置数组长度 <= 2 "),!1;if(null!=t[1]){let e=["any","end"];if(!e.includes(t[1])&&"[object Number]"!=u(t[1]))return console.log("位置错误 eg: any|end|null|%Number%"),!1}return!0}function p(t){return 2!=t.length?(console.log("匹配位置配置数组长度 == 2 eg:['*',2]"),!1):"[object Number]"!=u(t[1])?(console.log("位置错误 eg:1|2|3|4(Number)"),!1):!(t[1]>4||t[1]<1)||(console.log("位置错误 eg: 1<= N <= 4"),!1)}},9448:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return u}));var s=a("b775"),r=a("4328"),o=a.n(r),n=a("365c");function l(t){return Object(s["a"])({url:""+n["a"].plugin.getPlugin,method:"post",data:o.a.stringify(t)})}function i(t){return Object(s["a"])({url:""+n["a"].plugin.setPlugin,method:"post",data:o.a.stringify(t)})}function c(t){return Object(s["a"])({url:""+n["a"].plugin.addPlugin,method:"post",data:o.a.stringify(t)})}function u(t){return Object(s["a"])({url:""+n["a"].plugin.delPlugin,method:"post",data:o.a.stringify(t)})}},e13e:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-table",t._b({attrs:{border:"","header-row-style":{"line-height":"23px"}}},"el-table",t.$attrs,!1),[e("el-table-column",{attrs:{label:"匹配位置",align:"center",prop:"malocation"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",disabled:t.flag,placeholder:"请选择"},on:{change:function(e){return t.selectNodewz(a.dataTmpselectwz,s)}},model:{value:a.dataTmpselectwz,callback:function(e){t.$set(a,"dataTmpselectwz","string"===typeof e?e.trim():e)},expression:"row.dataTmpselectwz"}},t._l(t.computedNameMatch,(function(t,a){return e("el-option",{key:a,attrs:{value:t,label:t}})})),1)]}}])}),e("el-table-column",{attrs:{label:"匹配方式",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",disabled:t.flag,placeholder:"请选择"},on:{change:function(e){return t.selectNodematch(a.dataTmpselectmatch,s)}},model:{value:a.dataTmpselectmatch,callback:function(e){t.$set(a,"dataTmpselectmatch","string"===typeof e?e.trim():e)},expression:"row.dataTmpselectmatch"}},t._l(t.computedOptions[a.dataTmpselectwz],(function(a,s){return e("el-option",{key:s,attrs:{value:a,label:a}},[t._v(" "+t._s(a)+" ")])})),1)]}}])}),e("el-table-column",{attrs:{label:"取反标识",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",disabled:t.flag,placeholder:"请选择"},on:{change:function(e){return t.selectNodematchqf(a.dataIsNot,s)}},model:{value:a.dataIsNot,callback:function(e){t.$set(a,"dataIsNot",e)},expression:"row.dataIsNot"}},t._l([!1,!0],(function(t,a){return e("el-option",{key:a,attrs:{value:t,label:t+""}})})),1)]}}])}),e("el-table-column",{attrs:{label:"匹配内容",align:"center",width:"400"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-input",{attrs:{size:"small",placeholder:t.computed_dataRuleValue_place(a.dataTmpselectmatch),name:"name",title:t.computed_dataRuleValue_place(a.dataTmpselectmatch),disabled:t.flag},on:{blur:function(e){return e.preventDefault(),t.change_dataRuleValue(s)}},model:{value:a.dataRuleValue,callback:function(e){t.$set(a,"dataRuleValue","string"===typeof e?e.trim():e)},expression:"row.dataRuleValue"}}),e("el-row",{directives:[{name:"show",rawName:"v-show",value:t.computedRulewz(s),expression:"computedRulewz($index)"}]},[e("el-input",{staticStyle:{width:"65%"},attrs:{size:"small",placeholder:t.computed_dataRulewz_place(a.dataTmpselectwz),name:"name",title:t.computed_dataRulewz_place(a.dataTmpselectwz),disabled:t.flag},on:{blur:function(e){return e.preventDefault(),t.change_dataRulewz(s)}},model:{value:a.dataRulewz,callback:function(e){t.$set(a,"dataRulewz","string"===typeof e?e.trim():e)},expression:"row.dataRulewz"}}),t._v(" * 匹配位置取值配置 ")],1)]}}])}),e("el-table-column",{attrs:{label:"连接运算符",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a,$index:s}){return[e("el-select",{attrs:{size:"small",placeholder:"请选择",disabled:t.flag},on:{change:function(e){return t.selectNodeOperator(a.dataOperator,s)}},model:{value:a.dataOperator,callback:function(e){t.$set(a,"dataOperator","string"===typeof e?e.trim():e)},expression:"row.dataOperator"}},t._l(["and","or"],(function(t,a){return e("el-option",{key:a,attrs:{value:t,label:t}})})),1)]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function({$index:a}){return[e("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:t.handleAdd}}),t.$attrs.data.length>1?e("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text",icon:"el-icon-remove-outline"},on:{click:function(e){return t.handleRemove(a)}}}):t._e()]}}])}),e("td",[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.flag,expression:"flag",modifiers:{trim:!0}}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.flag)?t._i(t.flag,null)>-1:t.flag},on:{click:t.UphandleChange,change:function(e){var a=t.flag,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=t._i(a,o);s.checked?n<0&&(t.flag=a.concat([o])):n>-1&&(t.flag=a.slice(0,n).concat(a.slice(n+1)))}else t.flag=r}}})])],1)},r=[],o=a("fb22"),n=o["a"],l=a("2877"),i=Object(l["a"])(n,s,r,!1,null,"18074d40",null);e["a"]=i.exports},fb22:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_options_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("6ae5"),element_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5c96"),element_ui__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_2__);const IPCIDR=__webpack_require__("833b");function TypeToString(t){return Object.prototype.toString.call(t)}function cloneObj(t){var e={};for(var a in t instanceof Array&&(e=[]),t){var s=t[a];e[a]="object"===typeof s?cloneObj(s):s}return e}function isInArray(t,e){if("[object Array]"==TypeToString(t)&&"[object Array]"==TypeToString(e)){for(var a=0;a<t.length;a++)for(var s=0;s<e.length;s++)if(t[a]==e[s])return!0;return!1}return!1}var match_str=["等于","包含","正则","TOKEN"],match_array=["字典","IP段","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],matchobj=new Object;matchobj["等于"]={value:"=",des:"【字符串等于】 eg:'请输入字符串' * 表示匹配任意字符串"},matchobj["包含"]={value:"in",des:"【字符串包含】 eg:'请输入字符串'"},matchobj["正则"]={value:"jio",des:"【字符串正则 jio (ngx.re 参数修改使用 json 配置)】 eg:'请输入字符串'"},matchobj["TOKEN"]={value:"@token@",des:"【服务端 token 验证】 eg:'请输入变量名称 ...'"},matchobj["字典"]={value:"dict",des:"【等于对象中任一值】 eg:{'匹配':true,'字典中值为 true':true,'任意一个':true}"},matchobj["IP段"]={value:"cidr",des:"【ip段 cidr 列表匹配】 eg:['匹配','cidr 列表中','任意一个']"},matchobj["长度"]={value:"len",des:"【字符串长度匹配 min <= (*len) <= max 】 eg:['最小值','最大值']"},matchobj["列表"]={value:"list",des:"【等于列表任一值】 eg:['匹配','数组中','任意一个']"},matchobj["包含列表"]={value:"in_list",des:"【包含列表任一值】 eg:['包含匹配','列表中','任意一个']"},matchobj["aho 包含列表"]={value:"aho",des:"【包含列表任一值（使用 aho 算法）】 eg:['包含匹配','列表中','任意一个']"},matchobj["前缀列表"]={value:"start_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},matchobj["前缀列表(不分大小写)"]={value:"ustart_list",des:"【前缀列表任一值】 eg:['前缀','列表中','任意一个(前缀匹配)']"},matchobj["后缀列表"]={value:"end_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"},matchobj["后缀列表(不分大小写)"]={value:"uend_list",des:"【后缀列表任一值】 eg:['后缀','列表中','任意一个(后缀匹配)']"};var wzobj=new Object;function checkmatch(t){var e;if(""==t[1]&&(t[1]="="),"restart_list"==t[1]&&(t[1]="ustart_list"),"reend_list"==t[1]&&(t[1]="uend_list"),"rein_list"==t[1]&&(t[1]="uin_list"),"[object Boolean]"!=TypeToString(t[2])&&(t[2]=!1),Object.keys(matchobj).forEach((function(a){matchobj[a]["value"]==t[1]&&(e=matchobj[a],e["name"]=a)})),null!=e){if("长度"==e.name){if(2!=t[0].length)return console.log("checkmatch(objmatch) 数组长度需要为 2"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("数组长度需要为 2"),!1;if("[object Number]"!=TypeToString(t[0][0])||"[object Number]"!=TypeToString(t[0][1]))return console.log("checkmatch(objmatch) 数组 需要是 Number"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("数组 需要是 Number"),!1}else if("字典"==e.name){if("[object Object]"!=TypeToString(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("匹配内容 需要是 Object eg：{'aaaa':true,'bbbb':true}"),!1;Object.keys(t[0]).forEach((function(e){if("[object Boolean]"!=TypeToString(t[0][e]))return console.log("checkmatch(objmatch) key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("key 对应的值 需要是 Boolean eg: {'aaaa':true,'bbbb':true}"),!1}))}else if("IP段"==e.name){if("[object Array]"!=TypeToString(t[0]))return!1;t[0]=Array.from(new Set(t[0])),console.log("objmatch[0] ",t[0]);for(var a=0;a<t[0].length;a++)if(!IPCIDR.isValidAddress(t[0][a]))return console.log("checkmatch(objmatch) 数组值需要是合法的 CIDR eg: '192.168.1.1'"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("数组值需要是合法的 CIDR eg: '192.168.1.1'"),!1}else if(match_array.includes(e.name)){if("[object Array]"!=TypeToString(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 Array eg：['1','aaaa']"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("匹配内容 需要是 Array eg：['1','aaaa']"),!1;t[0]=Array.from(new Set(t[0]))}else if("[object String]"!=TypeToString(t[0]))return console.log("checkmatch(objmatch) 内容 需要是 String eg：'aaaa'"),element_ui__WEBPACK_IMPORTED_MODULE_2__["Message"].error("匹配内容 需要是 String eg：'aaaa'"),!1;return!0}var s=new RegExp("[^jiosadxDjuU]");return!s.test(t[1])&&(matchobj["正则"]["value"]=t[1],!0)}function checkwz(t){if(t.length>2)return console.log("匹配位置配置数组长度 <= 2 "),!1;if(null!=t[1]){let e=["any","end"];if(!e.includes(t[1])&&"[object Number]"!=TypeToString(t[1]))return console.log("位置错误 eg: any|end|null|%Number%"),!1}return!0}function checkwz_post_form(t){return 2!=t.length?(console.log("匹配位置配置数组长度 == 2 eg:['*',2]"),!1):"[object Number]"!=TypeToString(t[1])?(console.log("位置错误 eg:1|2|3|4(Number)"),!1):!(t[1]>4||t[1]<1)||(console.log("位置错误 eg: 1<= N <= 4"),!1)}wzobj["headers"]={value:"headers",des:"【header 取值配置】\r\neg:['header头名称(横线使用下划线代替)','匹配位置'] \r\neg:['X_Scan_Memo','any (当有多个同名 header 头时 匹配任意位置)'] \r\neg:['X_Scan_Memo','end (默认值 当有多个同名 header 头时 匹配最后一个)']"},wzobj["args"]={value:"args",des:"【args 取值配置】\r\neg:['GET url请求参数名称','匹配位置'] \r\neg:['args_a','any (当有多个同名参数时 匹配任意位置)'] \r\neg:['args_b','end (默认值 当有多个同名 GET 参数时 匹配最后一个)']"},wzobj["posts"]={value:"posts",des:"【posts 取值配置】\r\neg:['POST body请求参数名称','匹配位置'] \r\neg:['username','any (当有多个同名参数时 匹配任意位置)'] \r\neg:['password','end (默认值 当有多个同名参数时 匹配最后一个)']"},wzobj["post_form"]={value:"post_form",des:"【post 表单取值配置】\r\neg:['form表单name名称',匹配位置(取值范围：1-4)] \r\neg:['*（匹配所有表单name）',2 -- 匹配文件名] \r\neg:['*（匹配所有表单name）',3 匹配上传文件类型]\r\neg:['*（匹配所有表单name）',4 匹配上传文件内容（前 10240 内容【可配置】）]\r\neg:['*（匹配所有表单name）',1 匹配form表单name名称]"};var GeneralList=["scheme","uri","remoteIp","ip","serverIp","http_host","server_name","host","method","referer","useragent","cookie","request_uri","query_string","http_content_type","headers","headers_data","args","args_data","posts","posts_data","posts_all","post_form"];__webpack_exports__["a"]={name:"match",props:{ruleData:{type:Object,required:!1,default:function(){return{nameMatch:[],rule:["referer",["https://www.baidu.com\\.*","jo"],"and"]}}}},computed:{computedNameMatch(){let t=[];if(0==this.ruleData.nameMatch.length)return t=[].concat(GeneralList),t;for(var e=this.ruleData.nameMatch.length-1;e>=0;e--)GeneralList.includes(this.ruleData.nameMatch[e])&&t.push(this.ruleData.nameMatch[e]);return 0==t.length?(t=[].concat(GeneralList),console.log("NameMatchList is ",t),t):t},computedOptions(){var t=new Object;return t["scheme"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["uri"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["remoteIp"]=["等于","列表","字典","IP段"],t["ip"]=["等于","列表","字典","IP段"],t["serverIp"]=["等于","列表","字典","IP段"],t["http_host"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["server_name"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["host"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["method"]=["等于","列表","字典","正则"],t["referer"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["headers"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["headers_data"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["useragent"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["cookie"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["args"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)","TOKEN"],t["args_data"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["posts"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["posts_data"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["posts_all"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t["post_form"]=["等于","包含","正则","字典","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"],t}},data(){return{dataLocalruleData:this.ruleData,dataTmpselectwz:"",dataTmpselectmatch:"",dataIsNot:!1,dataOperator:"and",dataRuleValue:"",dataRulewz:"",dataRuleArray:[],dataRuleView:"",flag:!1,outobj:{success:!1,emsg:"",data:""}}},created(){0==this.$attrs.ruleList.length?(this.dataTmpselectwz=this.computedNameMatch[0],this.dataTmpselectmatch=this.computedOptions[this.dataTmpselectwz][0],this.dataLocalruleData.rule[0]=this.dataTmpselectwz,this.dataLocalruleData.rule[1]=[""],null!=matchobj[this.dataTmpselectmatch]?this.dataLocalruleData.rule[1][1]=matchobj[this.dataTmpselectmatch].value:this.dataLocalruleData.rule[1][1]="=",this.computedRulewz?(this.dataLocalruleData.rule[1][2]=[],this.dataLocalruleData.rule[1][3]=this.dataIsNot,this.dataRuleArray=[this.dataLocalruleData.rule[1][0],this.dataLocalruleData.rule[1][2],this.dataLocalruleData.rule[1][3]]):(this.dataLocalruleData.rule[1][2]=this.dataIsNot,this.dataRuleArray=this.dataLocalruleData.rule[1]),this.dataLocalruleData.rule[2]=this.dataOperator):this.$attrs.ruleList.forEach((t,e)=>{let a=[];this.$attrs.data[e]||this.$set(this.$attrs.data,e,{dataTmpselectwz:"",dataTmpselectmatch:"",dataIsNot:!1,dataRuleValue:null,dataOperator:""}),this.$attrs.ruleList[e][1][1]||(this.$attrs.ruleList[e][1][1]="="),"restart_list"==this.$attrs.ruleList[e][1][1]&&(this.$attrs.ruleList[e][1][1]="ustart_list"),"reend_list"==this.$attrs.ruleList[e][1][1]&&(this.$attrs.ruleList[e][1][1]="uend_list"),"rein_list"==this.$attrs.ruleList[e][1][1]&&(this.$attrs.ruleList[e][1][1]="uin_list"),this.$attrs.data[e].dataTmpselectwz=t[0],this.computedRulewz(e)?("[object Boolean]"!=TypeToString(this.$attrs.ruleList[e][1][3])&&(this.$attrs.ruleList[e][1][3]=!1),a=[this.$attrs.ruleList[e][1][0],this.$attrs.ruleList[e][1][1],this.$attrs.ruleList[e][1][3]],this.$attrs.data[e].dataRulewz=JSON.stringify(this.$attrs.ruleList[e][1][2])):("[object Boolean]"!=TypeToString(this.$attrs.ruleList[e][1][2])&&(this.$attrs.ruleList[e][1][2]=!1),a=this.$attrs.ruleList[e][1]),checkmatch(a);let s=a[1];var r;if(Object.keys(matchobj).forEach((function(t){matchobj[t]["value"]==s&&(r=matchobj[t],r["name"]=t)})),null!=r)this.$attrs.data[e].dataTmpselectmatch=r.name;else{var o=new RegExp("[^jiosadxDjuU]");o.test(s)||(this.$attrs.data[e].dataTmpselectmatch="正则")}"[object String]"!=TypeToString(a[0])?this.$attrs.data[e].dataRuleValue=JSON.stringify(this.$attrs.ruleList[e][1][0]):this.$attrs.data[e].dataRuleValue=this.$attrs.ruleList[e][1][0],this.$attrs.data[e].dataIsNot=a[2],this.$attrs.data[e].dataOperator=this.$attrs.ruleList[e][2]}),this.dataRuleView=JSON.stringify(this.$attrs.ruleList)},methods:{showSelect(t){return["IP段","长度","列表","包含列表","aho 包含列表","前缀列表","前缀列表(不分大小写)","后缀列表","后缀列表(不分大小写)"].includes(t)},computed_dataRuleValue_place(t){var e=matchobj[t];return null!=e?e.des:"请输入"},computed_dataRulewz_place(t){var e=wzobj[t];return null!=e?e.des:"请输入"},computedRulewz(t){let e=["headers","args","posts","post_form"];return!!e.includes(this.$attrs.data[t].dataTmpselectwz)},handleRemove(t){this.$attrs.data.splice(t,1),this.$attrs.ruleList.splice(t,1)},handleAdd(){this.$attrs.data.push({dataIsNot:"false",dataRuleValue:""})},UphandleChange(){this.flag?(this.flag=!1,this.outobj.success=!1,this.$emit("UphandleChange:",this.outobj)):(this.selectALl(),0==this.outobj.success&&(alert("规则配置错误 "+this.outobj.emsg),event.target.checked=!1),console.log("UphandleChange true",this.outobj),this.$emit("UphandleChange:",this.outobj))},selectALl(t){const e=["",[]];var a,s;(this.$set(this.$attrs.ruleList,t,e),this.$attrs.ruleList[t][0]=this.$attrs.data[t].dataTmpselectwz,matchobj[this.$attrs.data[t].dataTmpselectmatch]&&(this.$attrs.ruleList[t][1][1]=matchobj[this.$attrs.data[t].dataTmpselectmatch].value),this.$attrs.data[t].dataRuleValue&&this.check_dataRuleValue(t),this.computedRulewz(t))?(this.$attrs.ruleList[t][1][1]=null===(a=matchobj[this.$attrs.data[t].dataTmpselectmatch])||void 0===a?void 0:a.value,void 0!==this.$attrs.data[t].dataIsNot&&(this.$attrs.ruleList[t][1][3]=this.$attrs.data[t].dataIsNot),this.$attrs.data[t].dataRulewz&&this.check_dataRulewz(t)):(void 0!==this.$attrs.data[t].dataIsNot&&(this.$attrs.ruleList[t][1][2]=this.$attrs.data[t].dataIsNot),this.$attrs.ruleList[t][1][1]=null===(s=matchobj[this.$attrs.data[t].dataTmpselectmatch])||void 0===s?void 0:s.value);this.$attrs.ruleList[t][2]=this.$attrs.data[t].dataOperator,1==this.outobj.success&&(this.outobj.data=this.$attrs.ruleList),this.dataRuleView=this.$attrs.ruleList,this.outobj.succes&&this.$emit("changeRule",this.dataRuleView)},selectNodewz(t,e){this.$attrs.data[e].dataTmpselectmatch="",this.selectALl(e),console.log("匹配位置:",t)},selectNodematch(t,e){this.$attrs.data[e].dataRuleValue="",this.selectALl(e),console.log("匹配方式:",t)},selectNodematchqf(t,e){this.selectALl(e),console.log("是否取反:",t)},print(t){},selectNodeOperator(t,e){this.selectALl(e),console.log("规则连接运算符:",t)},check_dataRuleValue(index){if(this.outobj.success=!1,console.log(this.$attrs.data[index].dataTmpselectmatch),match_array.includes(this.$attrs.data[index].dataTmpselectmatch))try{this.$attrs.ruleList[index][1][0]=eval("("+this.$attrs.data[index].dataRuleValue+")"),checkmatch(this.$attrs.ruleList[index][1])?(this.outobj.success=!0,console.log("dataRuleValue 规则合法",this.$attrs.ruleList[index][1][0])):this.$attrs.data[index].dataRuleValue=""}catch(err){return this.outobj.success=!1,this.outobj.emsg=err,console.log("dataRuleValue 规则不合法",err),Object(_options_js__WEBPACK_IMPORTED_MODULE_1__["f"])(this.$attrs.ruleList[index][1]),!1}else console.log(222),this.$attrs.ruleList[index][1][0]=this.$attrs.data[index].dataRuleValue;return this.outobj.success=!0,!0},change_dataRuleValue(t){this.selectALl(t)},check_dataRulewz(t){try{if("headers"==this.$attrs.data[t].dataTmpselectwz){this.$attrs.data[t].dataRulewz=this.$attrs.data[t].dataRulewz.replace(/-/g,"_");let e=JSON.parse(this.$attrs.data[t].dataRulewz);if(this.$attrs.ruleList[t][1][2]=e,!checkwz(e))return this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法",console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则不合法"),!1;console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则合法")}else{if("post_form"==this.$attrs.data[t].dataTmpselectwz){let e=JSON.parse(this.$attrs.data[t].dataRulewz);return this.$attrs.ruleList[t][1][2]=this.$attrs.data[t].dataRulewz,checkwz_post_form(e)?(console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则合法"),!0):(console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则不合法"),this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法",!1)}{let e=JSON.parse(this.$attrs.data[t].dataRulewz);if(this.$attrs.ruleList[t][1][2]=e,!checkwz(e))return console.log(this.$attrs.data[t].dataTmpselectwz,"匹配位置配置 规则不合法"),this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法",!1;console.log(this.dataTmpselectwz,"匹配位置配置 规则合法")}}}catch(e){return console.log("匹配位置配置 规则不合法",e),this.outobj.success=!1,this.outobj.emsg="匹配位置配置 规则不合法 "+e,!1}return!0},change_dataRulewz(t){this.selectALl(t)}}}},ff25:function(t,e,a){}}]);