(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bae6e20"],{"085f":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{attrs:{shadow:"never"}},[n("el-row",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{gutter:10}},[n("div",{staticStyle:{width:"300px",float:"left"}},[n("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("div",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleAdd}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSave}},[t._v("保存")])],1)]),n("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"referer",name:"referer_Mod"}},[n("rulecards",{ref:"referer_Mod",on:{submitForm:t.submitForm,handleSet:t.handleSet}})],1),n("el-tab-pane",{attrs:{label:"uri",name:"uri_Mod"}},[n("rulecards",{ref:"uri_Mod",on:{submitForm:t.submitForm,handleSet:t.handleSet}})],1),n("el-tab-pane",{attrs:{label:"header",name:"header_Mod"}},[n("rulecards",{ref:"header_Mod",on:{submitForm:t.submitForm,handleSet:t.handleSet}})],1),n("el-tab-pane",{attrs:{label:"useragent",name:"useragent_Mod"}},[n("rulecards",{ref:"useragent_Mod",on:{submitForm:t.submitForm,handleSet:t.handleSet}})],1),n("el-tab-pane",{attrs:{label:"cookie",name:"cookie_Mod"}},[n("rulecards",{ref:"cookie_Mod",on:{submitForm:t.submitForm,handleSet:t.handleSet}})],1),n("el-tab-pane",{attrs:{label:"args_data",name:"args_Mod"}},[n("rulecards",{ref:"args_Mod",on:{submitForm:t.submitForm,handleSet:t.handleSet}})],1),n("el-tab-pane",{attrs:{label:"post_data",name:"post_Mod"}},[n("rulecards",{ref:"post_Mod",on:{submitForm:t.submitForm,handleSet:t.handleSet}})],1)],1),n("el-row",[n("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.handleApply}},[t._v("应用")])],1)]),n("el-dialog",{attrs:{title:t.title,visible:t.open,width:"60%"},on:{"update:visible":function(e){t.open=e}}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("vue-json-editor",{staticClass:"editorR",attrs:{mode:"code",lang:"zh"},model:{value:t.form.contents,callback:function(e){t.$set(t.form,"contents",e)},expression:"form.contents"}})],1),n("el-col",{attrs:{span:12}},[n("codemirror",{staticClass:"editorR",attrs:{options:t.options},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),n("br"),n("el-link",{attrs:{href:"https://www.kancloud.cn/openstar/install/1136671",target:"_blank"}},[t._v("详情请点击此处，参考文档 ")])],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.setData}},[t._v("确 定")]),n("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)],1)},a=[],s=(n("4de4"),n("c975"),n("d81d"),n("53ca")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticStyle:{margin:"20px"}},[n("el-col",{attrs:{span:12}},[n("el-col",{attrs:{span:8}},[n("span",{staticStyle:{"margin-right":"20px"}},[t._v("规则开关:")]),n("el-radio-group",{on:{change:function(e){return t.submitForm("","state")}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[n("el-radio",{attrs:{label:"on"}},[t._v("on")]),n("el-radio",{attrs:{label:"off"}},[t._v("off")])],1)],1),n("el-col",{directives:[{name:"show",rawName:"v-show",value:"post_Mod"===t.activeName||"args_Mod"===t.activeName,expression:'activeName === "post_Mod" || activeName === "args_Mod"'}],attrs:{span:8}},[n("span",{staticStyle:{"margin-right":"20px"}},[t._v("HPP拦截开关:")]),n("el-radio-group",{on:{change:function(e){return t.submitForm("","hpp_state")}},model:{value:t.HPP_state,callback:function(e){t.HPP_state=e},expression:"HPP_state"}},[n("el-radio",{attrs:{label:"on"}},[t._v("on")]),n("el-radio",{attrs:{label:"off"}},[t._v("off")])],1)],1)],1),n("el-col",{attrs:{span:12}},[n("div",{staticStyle:{float:"right"}},[n("span",{staticStyle:{"margin-right":"20px"}},[t._v("当前数量："+t._s(t.count))]),n("span",{staticStyle:{color:"blue"}},[t._v("版本号：")]),t._v(t._s(t.version)+" ")])])],1),n("el-table",{attrs:{data:t.userList,border:""}},[n("el-table-column",{attrs:{label:"ID",align:"center",prop:"id",width:"80","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"内容",align:"left",prop:"contents","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"360","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleSet(e.row)}}},[t._v("编辑")]),n("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-top"},on:{click:function(n){return t.up(e.$index)}}},[t._v("上移")]),n("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-bottom"},on:{click:function(n){return t.down(e.$index)}}},[t._v("下移")]),n("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-arrow-up"},on:{click:function(n){return t.upIndex(e.$index)}}},[t._v("置顶")]),n("el-button",{staticStyle:{color:"orange"},attrs:{size:"mini",type:"text",icon:"el-icon-arrow-down"},on:{click:function(n){return t.downIndex(e.$index)}}},[t._v("置底")]),n("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.row.visible,callback:function(n){t.$set(e.row,"visible",n)},expression:"scope.row.visible"}},[n("p",[t._v("确定要删除吗?")]),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.submitForm(e.row,"del")}}},[t._v("确定")])],1),n("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)},r=[],c=(n("a434"),{name:"rulecards",data:function(){return{activeName:"",tempList:[],userList:[],count:0,state:"off",version:"",HPP_state:"off"}},methods:{up:function(t){0!==t&&this.swapItems(this.userList,t,t-1)},upIndex:function(t){0!==t&&this.swapItems(this.userList,t,0,"up")},down:function(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,t+1)},downIndex:function(t){t!==this.userList.length-1&&this.swapItems(this.userList,t,0,"down")},swapItems:function(t,e,n,i){return"up"==i?(t.unshift(t[e]),t.splice(e+1,1),t):"down"==i?(t.push(t[e]),t.splice(e,1),t):(t[e]=t.splice(n,1,t[e])[0],t)},submitForm:function(t,e){this.$emit("submitForm",t,e)},handleSet:function(t){console.log(t),this.$emit("handleSet",t)}}}),l=c,d=n("2877"),u=Object(d["a"])(l,o,r,!1,null,null,null),m=u.exports,f=n("8f94"),p=(n("a7be"),n("acdf"),n("7ba3"),n("a8d9"),n("db91"),n("b2b9"),n("f9d4"),n("8e77"),n("45a3")),h=n("a417"),v=n("e762").Base64,b={components:{vueJsonEditor:p["a"],codemirror:f["codemirror"],rulecards:m},data:function(){return{options:{tabSize:4,mode:{name:"javascript",json:!0},theme:"darcula",lineNumbers:!0,line:!0,lineWrapping:!0,styleSelectedText:!0,styleActiveLine:!0,hintOptions:{completeSingle:!0}},code:"",search:"",activeName:"referer_Mod",open:!1,title:"",form:{id:0,contents:{}}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this,e={action:"get",mod:this.activeName};Object(h["b"])(e).then((function(e){var n=[],i=e.msg;if("post_Mod"===t.activeName||"args_Mod"===t.activeName){for(var a in i)if("count"!=a&&"G_version"!=a&&"state"!=a&&"HPP_state"!=a){var s={};s.id=a,s.contents=JSON.stringify(i[a]),n.push(s)}t.$refs[t.activeName].version=e.msg.G_version,t.$refs[t.activeName].HPP_state=e.msg.HPP_state,t.$refs[t.activeName].state=e.msg.state,t.$refs[t.activeName].count=n.length,t.$refs[t.activeName].tempList=n,t.$refs[t.activeName].userList=n,t.$refs[t.activeName].activeName=t.activeName}else{for(var a in i)if("count"!=a&&"G_version"!=a&&"state"!=a){s={};s.id=a,s.contents=JSON.stringify(i[a]),n.push(s)}t.$refs[t.activeName].version=e.msg.G_version,t.$refs[t.activeName].state=e.msg.state,t.$refs[t.activeName].count=n.length,t.$refs[t.activeName].tempList=n,t.$refs[t.activeName].userList=n,t.$refs[t.activeName].activeName=t.activeName}}))},isJSON:function(t){if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!=Object(s["a"])(e)||!e)}catch(n){return!1}else if("object"==Object(s["a"])(t)&&t)return!0},reset:function(){this.form={id:0,contents:{}}},cancel:function(){this.open=!1,this.reset()},handleAdd:function(){this.reset(),this.title="添加",this.open=!0},handleSet:function(t){this.reset(),this.title="编辑";var e={};e.id=t.id,e.contents=JSON.parse(t.contents),this.form=e,this.open=!0},submitForm:function(t,e){var n=this,i=this.$refs[this.activeName].activeName,a=this.$refs[this.activeName].state,s=this.$refs[this.activeName].HPP_state,o=this.$refs[this.activeName].version;if("state"===e||"hpp_state"===e){var r={mod:"base",action:"set",id:i,value:JSON.stringify({state:a,HPP_state:s,G_version:o})};Object(h["b"])(r).then((function(t){"ok"===t.code?(n.$notify({title:"成功",message:t.msg,type:"success"}),n.open=!1,n.getList()):n.$notify({title:"警告",message:t.msg,type:"warning"})}))}else if("del"===e){r={action:"del",mod:this.activeName,id:t.id};Object(h["b"])(r).then((function(t){"ok"===t.code?(n.$notify({title:"成功",message:t.msg,type:"success"}),n.open=!1,n.getList(1)):n.$notify({title:"警告",message:t.msg,type:"warning"})}))}},setData:function(){var t=this;if(!this.isJSON(this.form.contents))return this.$message.error("配置内容:json格式错误/没有内容"),!1;if("编辑"===this.title){var e={action:"set",mod:this.activeName,id:this.form.id,value:JSON.stringify(this.form.contents)};Object(h["b"])(e).then((function(e){"ok"===e.code?(t.$notify({title:"成功",message:e.msg,type:"success"}),t.open=!1,t.getList(1)):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}else{e={action:"add",mod:this.activeName,value:JSON.stringify(this.form.contents)};Object(h["b"])(e).then((function(e){"ok"===e.code?(t.$notify({title:"成功",message:e.msg,type:"success"}),t.open=!1,t.getList(1)):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}},handleSave:function(){var t=this,e={action:"save",mod:"all_Mod"};Object(h["h"])(e).then((function(e){"ok"==e.code?t.$notify({title:"成功",message:e.msg,type:"success"}):t.$notify({title:"警告",message:e.msg,type:"warning"})}))},handleApply:function(){var t=this,e=this.$refs[this.activeName].userList.map((function(t){return JSON.parse(t.contents)})),n={action:"set",mod:this.activeName,value:JSON.stringify(e)};Object(h["b"])(n).then((function(e){"ok"==e.code?t.$notify({title:"成功",message:e.msg,type:"success"}):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}},filters:{match:function(t){return v.decode(t)}},watch:{$route:function(t,e){},activeName:{immediate:!0,handler:function(t,e){switch(this.activeName){case"referer_Mod":this.code='\n\n\n{\n  "state": "规则开关",\n  "id":"规则ID [referer_Mod-1001]",\n  "des": "规则描述",\n  "waf": "OWASP 标识 [cc] /* 可去除该字段 */",\n  "uri":["匹配内容","匹配符","是否取反"],\n  "hostname":["匹配内容","匹配符","是否取反"],\n  "referer":["匹配内容","匹配符","是否取反"],\n  "action": "动作 [allow/deny/log]"\n}\n\n\n';break;case"uri_Mod":this.code='\n\n{\n  "state": "规则开关",\n  "id":"规则ID [uri_Mod-1001]",\n  "des": "规则描述",\n  "waf": "OWASP 标识 [cc] /* 可去除该字段 */",\n  "uri":["匹配内容","匹配符","是否取反"],\n  "hostname":["匹配内容","匹配符","是否取反"],\n  "action": "动作 [allow/deny/log]"\n}\n\n\n';break;case"header_Mod":this.code='\n\n{\n  "state": "规则开关",\n  "id":"规则ID [header_Mod-1001]",\n  "des": "规则描述",\n  "waf": "OWASP 标识 [cc] /* 可去除该字段 */",\n  "uri":["匹配内容","匹配符","是否取反"],\n  "hostname":["匹配内容","匹配符","是否取反"],\n  "header":["匹配内容","匹配符","是否取反"],\n  "action": "动作 [allow/deny/log]"\n}\n\n\n';break;case"useragent_Mod":this.code='\n\n{\n  "state": "规则开关",\n  "id":"规则ID [useragent_Mod-1001]",\n  "des": "规则描述",\n  "waf": "OWASP 标识 [cc] /* 可去除该字段 */",\n  "useragent":["匹配内容","匹配符","是否取反"],\n  "hostname":["匹配内容","匹配符","是否取反"],\n  "action": "动作 [allow/deny/log]"\n}\n\n';break;case"cookie_Mod":this.code='\n\n{\n  "state": "规则开关",\n  "id":"规则ID [cookie_Mod-1001]",\n  "des": "规则描述",\n  "waf": "OWASP 标识 [cc] /* 可去除该字段 */",\n  "cookie":["匹配内容","匹配符","是否取反"],\n  "hostname":["匹配内容","匹配符","是否取反"],\n  "action": "动作 [allow/deny/log]"\n}\n\n\n';break;case"args_Mod":this.code='\n\n{\n  "state": "规则开关",\n  "id":"规则ID [args_Mod-1001]",\n  "des": "规则描述",\n  "waf": "OWASP 标识 [cc] /* 可去除该字段 */",\n  "args":["匹配内容","匹配符","是否取反"],\n  "hostname":["匹配内容","匹配符","是否取反"],\n  "action": "动作 [allow/deny/log]"\n}\n\n\n';break;case"post_Mod":this.code='\n\n{\n  "state": "规则开关",\n  "id":"规则ID [post_Mod-1001]",\n  "des": "规则描述",\n  "waf": "OWASP 标识 [cc] /* 可去除该字段 */",\n  "post":["匹配内容","匹配符","是否取反"],\n  "hostname":["匹配内容","匹配符","是否取反"],\n  "action": "动作 [allow/deny/log]"\n}\n\n\n';break;default:break}this.getList()}},search:{handler:function(t,e){this.$refs[this.activeName].userList=""===t?this.$refs[this.activeName].tempList:this.$refs[this.activeName].tempList.filter((function(e){if(e.contents.indexOf(t)>=0)return!0}))}}}},g=b,y=(n("ccfa"),Object(d["a"])(g,i,a,!1,null,"1d87938e",null));e["default"]=y.exports},3967:function(t,e,n){},"3ca3":function(t,e,n){"use strict";var i=n("6547").charAt,a=n("69f3"),s=n("7dd0"),o="String Iterator",r=a.set,c=a.getterFor(o);s(String,"String",(function(t){r(this,{type:o,string:String(t),index:0})}),(function(){var t,e=c(this),n=e.string,a=e.index;return a>=n.length?{value:void 0,done:!0}:(t=i(n,a),e.index+=t.length,{value:t,done:!1})}))},"53ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}},a434:function(t,e,n){"use strict";var i=n("23e7"),a=n("23cb"),s=n("a691"),o=n("50c4"),r=n("7b0b"),c=n("65f0"),l=n("8418"),d=n("1dde"),u=n("ae40"),m=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!m||!f},{splice:function(t,e){var n,i,d,u,m,f,g=r(this),y=o(g.length),_=a(t,y),S=arguments.length;if(0===S?n=i=0:1===S?(n=0,i=y-_):(n=S-2,i=h(p(s(e),0),y-_)),y+n-i>v)throw TypeError(b);for(d=c(g,i),u=0;u<i;u++)m=_+u,m in g&&l(d,u,g[m]);if(d.length=i,n<i){for(u=_;u<y-i;u++)m=u+i,f=u+n,m in g?g[f]=g[m]:delete g[f];for(u=y;u>y-i+n;u--)delete g[u-1]}else if(n>i)for(u=y-i;u>_;u--)m=u+i-1,f=u+n-1,m in g?g[f]=g[m]:delete g[f];for(u=0;u<n;u++)g[u+_]=arguments[u+2];return g.length=y-i+n,d}})},ccfa:function(t,e,n){"use strict";n("3967")},d28b:function(t,e,n){var i=n("746f");i("iterator")},e01a:function(t,e,n){"use strict";var i=n("23e7"),a=n("83ab"),s=n("da84"),o=n("5135"),r=n("861d"),c=n("9bf2").f,l=n("e893"),d=s.Symbol;if(a&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};l(m,d);var f=m.prototype=d.prototype;f.constructor=m;var p=f.toString,h="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=p.call(t);if(o(u,t))return"";var n=h?e.slice(7,-1):e.replace(v,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:m})}}}]);