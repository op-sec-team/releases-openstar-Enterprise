(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c567e474"],{"0d87":function(t,e,i){"use strict";i("0f21")},"0f21":function(t,e,i){},"3ca3":function(t,e,i){"use strict";var n=i("6547").charAt,o=i("69f3"),s=i("7dd0"),r="String Iterator",a=o.set,l=o.getterFor(r);s(String,"String",(function(t){a(this,{type:r,string:String(t),index:0})}),(function(){var t,e=l(this),i=e.string,o=e.index;return o>=i.length?{value:void 0,done:!0}:(t=n(i,o),e.index+=t.length,{value:t,done:!1})}))},"53ca":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0");function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}},d28b:function(t,e,i){var n=i("746f");n("iterator")},e01a:function(t,e,i){"use strict";var n=i("23e7"),o=i("83ab"),s=i("da84"),r=i("5135"),a=i("861d"),l=i("9bf2").f,c=i("e893"),d=s.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};c(f,d);var p=f.prototype=d.prototype;p.constructor=f;var m=p.toString,h="Symbol(test)"==String(d("test")),g=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=m.call(t);if(r(u,t))return"";var i=h?e.slice(7,-1):e.replace(g,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:f})}},f4e9:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-card",{attrs:{shadow:"never"}},[i("el-row",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{gutter:10}},[i("div",{staticStyle:{width:"300px",float:"left"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("div",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleAdd}},[t._v("添加")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSave}},[t._v("保存")])],1)]),i("el-row",{staticStyle:{margin:"20px"}},[i("el-col",{attrs:{span:12}},[i("span",{staticStyle:{"margin-right":"20px"}},[t._v("获取真实IP配置:")]),i("el-radio-group",{on:{change:t.setbaseState},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[i("el-radio",{attrs:{label:"on"}}),i("el-radio",{attrs:{label:"off"}})],1)],1),i("el-col",{attrs:{span:12}},[i("div",{staticStyle:{float:"right"}},[i("span",{staticStyle:{"margin-right":"20px"}},[t._v("当前数量："+t._s(t.pageTotal))]),i("span",{staticStyle:{color:"blue"}},[t._v("版本号：")]),t._v(t._s(t.version)+" ")])])],1),i("el-table",{attrs:{data:t.userList,border:""}},[i("el-table-column",{attrs:{label:"域名",align:"left",prop:"id",width:"320","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"JSON数据",align:"left",prop:"contents","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"120","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{color:"green"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(i){return t.handleSet(e.row)}}},[t._v("编辑")]),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.row.visible,callback:function(i){t.$set(e.row,"visible",i)},expression:"scope.row.visible"}},[i("p",[t._v("确定要删除吗?")]),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.handleDel(e.row)}}},[t._v("确定")])],1),i("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),i("el-row",[i("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.confirmApply}},[t._v("应用")])],1)]),i("el-dialog",{attrs:{title:t.title,visible:t.open,width:"60%"},on:{"update:visible":function(e){t.open=e}}},[t._v(" 域名 "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:"添加"===t.title,expression:"title === '添加'"}],staticStyle:{width:"50%","margin-bottom":"10px"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("vue-json-editor",{staticClass:"editorR",attrs:{mode:"code",lang:"zh"},model:{value:t.form.contents,callback:function(e){t.$set(t.form,"contents",e)},expression:"form.contents"}})],1),i("el-col",{attrs:{span:12}},[i("codemirror",{staticClass:"editorR",attrs:{options:t.options},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),i("br"),i("el-link",{attrs:{href:"https://www.kancloud.cn/openstar/install/1136671",target:"_blank"}},[t._v("详情请点击此处，参考文档")])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),i("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)],1)},o=[],s=(i("4de4"),i("c975"),i("b0c0"),i("53ca")),r=i("8f94"),a=(i("a7be"),i("acdf"),i("7ba3"),i("a8d9"),i("db91"),i("b2b9"),i("f9d4"),i("8e77")),l=i("45a3"),c=i("a417"),d=i("e762").Base64,u={components:{MarkdownPreview:a["a"],vueJsonEditor:l["a"],codemirror:r["codemirror"]},data:function(){return{code:'\n\n{\n  "ips":["匹配内容","匹配符","是否取反"],\n  "realipfrom":"http头名称",\n}\n\n/* 这里的匹配符只能使用：等于,数组,列表,字典,网段 */\n\n\n',options:{tabSize:4,mode:{name:"javascript",json:!0},theme:"darcula",lineNumbers:!0,line:!0,lineWrapping:!0,styleSelectedText:!0,styleActiveLine:!0,hintOptions:{completeSingle:!0}},userList:[],tempList:[],pageTotal:0,state:"",version:"",search:"",open:!1,title:"",name:"",form:{id:0,contents:{}}}},created:function(){this.getList()},methods:{isJSON:function(t){if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!=Object(s["a"])(e)||!e)}catch(i){return!1}else if("object"==Object(s["a"])(t)&&t)return!0},getList:function(){var t=this,e={action:"get",mod:"realIpFrom_Mod"};Object(c["b"])(e).then((function(e){var i=e.msg,n=[];i=e.msg;for(var o in i)if("count"!=o&&"G_version"!=o&&"state"!=o){var s={};s.id=o,s.contents=JSON.stringify(i[o]),n.push(s)}t.version=e.msg.G_version,t.state=e.msg.state,t.userList=n,t.tempList=n,t.pageTotal=n.length}))},setbaseState:function(){var t=this,e={G_version:this.version,state:this.state},i={action:"set",mod:"base",id:"realIpFrom_Mod",value:JSON.stringify(e)};Object(c["b"])(i).then((function(e){"ok"===e.code?t.$notify({title:"成功",message:e.msg,type:"success"}):t.$notify({title:"警告",message:e.msg,type:"warning"})}))},reset:function(){this.name="",this.form={id:0,contents:{}}},cancel:function(){this.open=!1,this.reset()},handleAdd:function(){this.reset(),this.title="添加",this.open=!0},handleSet:function(t){this.reset(),this.title="编辑";var e={};e.id=t.id,e.contents=JSON.parse(t.contents),this.form=e,this.open=!0},handleDel:function(t){var e=this,i={action:"del",mod:"realIpFrom_Mod",id:t.id};Object(c["b"])(i).then((function(t){"ok"===t.code?(e.$notify({title:"成功",message:t.msg,type:"success"}),e.open=!1,e.getList()):e.$notify({title:"警告",message:t.msg,type:"warning"})}))},submitForm:function(){var t=this;if(!this.isJSON(this.form.contents))return this.$message.error("配置内容:json格式错误/没有内容"),!1;if("编辑"===this.title){var e={action:"set",mod:"realIpFrom_Mod",id:this.form.id,value:JSON.stringify(this.form.contents)};Object(c["b"])(e).then((function(e){"ok"===e.code?(t.$notify({title:"成功",message:e.msg,type:"success"}),t.open=!1,t.getList(1)):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}else{if(!this.name&&this.name.length<1)return this.$message.error("域名不能为空"),!1;e={action:"add",mod:"realIpFrom_Mod",id:this.name,value:JSON.stringify(this.form.contents)};Object(c["b"])(e).then((function(e){"ok"===e.code?(t.$notify({title:"成功",message:e.msg,type:"success"}),t.open=!1,t.getList(1)):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}},confirmApply:function(){var t={action:"set",mod:"realIpFrom_Mod",value:JSON.stringify(this.userList)};console.log(t)},handleSave:function(){var t=this,e={action:"save",mod:"all_Mod"};Object(c["h"])(e).then((function(e){"ok"==e.code?t.$notify({title:"成功",message:e.msg,type:"success"}):t.$notify({title:"警告",message:e.msg,type:"warning"})}))}},filters:{match:function(t){return d.decode(t)}},watch:{$route:function(t,e){},search:{handler:function(t,e){this.userList=""===t?this.tempList:this.tempList.filter((function(e){if(e.id.indexOf(t)>=0)return!0}))}}}},f=u,p=(i("0d87"),i("2877")),m=Object(p["a"])(f,n,o,!1,null,"95ee9cd4",null);e["default"]=m.exports}}]);